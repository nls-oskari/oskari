// Copyright (c) 2011 Harvest http://getharvest.com

/*
Chosen source: generate output using 'cake build'
Copyright (c) 2011 by Harvest
*/

Oskari.clazz.define("Oskari.framework.bundle.admin-layerrights.AdminLayerRightsBundleInstance",function(){this.sandbox=null,this.started=!1,this.plugins={},this.localization=null,this.service=null},{__name:"admin-layerrights",getName:function(){return this.__name},setSandbox:function(e){this.sandbox=e},getSandbox:function(){return this.sandbox},getLocalization:function(e){return this._localization||(this._localization=Oskari.getLocalization(this.getName())),e?this._localization[e]:this._localization},start:function(){var e=this,t=e.conf,n=(t?t.sandbox:null)||"sandbox",r=Oskari.getSandbox(n),i=null;if(e.started)return;e.started=!0,e.sandbox=r,e.localization=Oskari.getLocalization(e.getName()),t&&t.url?i=this.conf.url:i=r.getAjaxUrl()+"action_route=GetAllRoles",r.register(e);for(var s in e.eventHandlers)r.registerForEventByName(e,s);var o="userinterface.AddExtensionRequest",u=r.getRequestBuilder(o),a=u(this);r.request(this,a),r.registerAsStateful(e.mediator.bundleId,this),e.createUi()},init:function(){return null},update:function(){},onEvent:function(e){var t=this.eventHandlers[e.getName()];if(!t)return;return t.apply(this,[e])},eventHandlers:{},stop:function(){var e=this,t=e.sandbox(),n="userinterface.RemoveExtensionRequest",r=t.getRequestBuilder(n);for(var i in e.eventHandlers)t.unregisterFromEventByName(e,i);t.request(e,r(e)),e.sandbox.unregisterStateful(e.mediator.bundleId),e.sandbox.unregister(e),e.started=!1},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.framework.bundle.admin-layerrights.Flyout",this),this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.framework.bundle.admin-layerrights.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null,this.plugins["Oskari.userinterface.Tile"]=null},getPlugins:function(){return this.plugins},getTitle:function(){return this.getLocalization("title")},getDescription:function(){return this.getLocalization("desc")},createUi:function(){var e=this;e.plugins["Oskari.userinterface.Flyout"].setContent(),e.plugins["Oskari.userinterface.Tile"].refresh()},setState:function(e){this.plugins["Oskari.userinterface.Flyout"].setState(e)},getState:function(){return this.plugins["Oskari.userinterface.Flyout"].getState()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]}),define("bundles/framework/bundle/admin-layerrights/instance",function(){}),Oskari.clazz.define("Oskari.framework.bundle.admin-layerrights.Flyout",function(e){var t=this;t.instance=e,t.container=null,t.state=null,t.template=null,t.columns=null,t.cleanData=null,t.activeRole=null},{getName:function(){return"Oskari.framework.bundle.admin-layerrights.Flyout"},setEl:function(e,t,n){this.container=e[0],jQuery(this.container).hasClass("admin-layerrights")||jQuery(this.container).addClass("admin-layerrights")},startPlugin:function(){this.template=jQuery('<div class="admin-layerrights">\n   <form method="post" id="admin-layerrights-form">       <label><span></span>          <select class="admin-layerrights-role"></select>\n       </label>       <div class="admin-layerrights-layers">       </div>       <div class="controls"></div>   </form></div>\n');var e=this.instance._localization.rights;this.columns=[{id:"name",name:e.name},{id:"isSelected",name:e.rightToPublish},{id:"isViewSelected",name:e.rightToView},{id:"isDownloadSelected",name:e.rightToDownload},{id:"isViewPublishedSelected",name:e.rightToPublishView}]},stopPlugin:function(){},getTitle:function(){return this.instance.getLocalization("title")},getDescription:function(){return this.instance.getLocalization("desc")},getOptions:function(){},setState:function(e){this.state=e},getState:function(){return this.state?this.state:{}},doSave:function(){var e=this,t={resource:JSON.stringify(e.extractSelections())};jQuery.ajax({type:"POST",url:ajaxUrl+"action_route=SaveLayerPermission",lang:Oskari.getLang(),timestamp:(new Date).getTime(),data:t,success:function(){e.updatePermissionsTable(e.activeRole,"ROLE")},error:function(){}})},setContent:function(e){var t=this,n=jQuery(this.container),r=this.template.clone(),i=Oskari.clazz.create("Oskari.userinterface.component.Button"),s=r.find("div.controls"),o=r.find("label > span"),u=r.find("select.admin-layerrights-role");n.empty(),i.setTitle(t.instance.getLocalization("save")),i.setHandler(function(){t.doSave()}),s.append(i.getButton()),o.html(this.instance.getLocalization("selectRole")),r.append(e),u.change(function(e){t.activeRole=jQuery(e.currentTarget).val(),t.updatePermissionsTable(t.activeRole,"ROLE")}),n.append(r),t.getExternalIdsAjaxRequest("ROLE",0)},createLayerRightGrid:function(e,t){var n='<table class="layer-rights-table">',r=0,i=0,s=null,o=null,u=null;n+="<thead><tr>";for(r=0;r<e.length;r+=1)n+="<th>"+e[r].name+"</th>";n+="</tr></thead>",n+="<tbody>";for(r=0;i<t.length;i+=1){s=t[i],n+="<tr>";for(r=0;r<e.length;r+=1)o=e[r],u=s[o.id],o.id==="name"?n+='<td><span class="layer-name" data-resource="'+s.resourceName+'" data-namespace="'+s.namespace+'">'+u+"</span></td>":u?n+='<td><input type="checkbox" checked="checked" data-right="'+o.id+'" /></td>':n+='<td><input type="checkbox" data-right="'+o.id+'" /></td>';n+="</tr>"}return n+="</tbody>",n},extractSelections:function(){var e=this,t=[],n=jQuery(e.container),r=n.find("tbody tr"),i=0,s=0,o=null,u=null,a=null,f=null,l=null,c=null,h=null,p=null,d=!1;for(i=0;i<r.length;i+=1){d=!1,u=e.cleanData[i],o={},a=jQuery(r[i]),f=a.find("td span"),l=a.find("td input"),o.name=f.text(),o.resourceName=f.attr("data-resource"),o.namespace=f.attr("data-namespace"),o.roleId=e.activeRole;for(s=0;s<l.length;s+=1)c=jQuery(l[s]),h=c.attr("data-right"),p=c.prop("checked"),u[h]!==p&&(d=!0),o[h]=p;u.resourceName!==o.resourceName&&(d=!1),u.namespace!==o.namespace&&(d=!1),d&&t.push(o)}return t},updatePermissionsTable:function(e,t){var n=this;jQuery.getJSON(ajaxUrl,{action_route:"GetPermissionsLayerHandlers",lang:Oskari.getLang(),timestamp:(new Date).getTime(),externalId:e,externalType:t},function(e){n.cleanData=e.resource;var t=n.createLayerRightGrid(n.columns,e.resource);jQuery(n.container).find(".admin-layerrights-layers").empty().append(t)})},getExternalIdsAjaxRequest:function(e,t){var n=this;jQuery.getJSON(ajaxUrl,{action_route:"GetAllRoles",lang:Oskari.getLang(),timestamp:(new Date).getTime(),getExternalIds:e},function(r){n.makeExternalIdsSelect(r,e,t)})},makeExternalIdsSelect:function(e,t,n){var r=jQuery(this.container).find("select.admin-layerrights-role"),i,s;r.html("");if(t!=="0"){n!=="0"?i='<option value="0" >-- Valitse tunniste --</option>':i='<option value="0" selected="selected">-- Valitse tunniste --</option>';for(s=0;s<e.external.length;s+=1)e.external[s].id===n?i+='<option selected="selected" value="'+e.external[s].id+'">'+e.external[s].name+"</option>":i+='<option value="'+e.external[s].id+'">'+e.external[s].name+"</option>";r.html(i)}else r.html("")}},{protocol:["Oskari.userinterface.Flyout"]}),define("bundles/framework/bundle/admin-layerrights/Flyout",function(){}),Oskari.clazz.define("Oskari.framework.bundle.admin-layerrights.Tile",function(e){var t=this;t.instance=e,t.container=null,t.template=null},{getName:function(){return"Oskari.framework.bundle.admin-layerrights.Tile"},setEl:function(e,t,n){this.container=jQuery(e)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return this.instance.getLocalization("title")},getDescription:function(){return this.instance.getLocalization("desc")},getOptions:function(){},setState:function(e){},refresh:function(){}},{protocol:["Oskari.userinterface.Tile"]}),define("bundles/framework/bundle/admin-layerrights/Tile",function(){}),define("normalize",["require","module"],function(e,t){function o(e,t,n){if(e.indexOf("data:")===0)return e;e=r(e);if(e.match(/^\//)||e.match(s))return e;var i=n.match(s),o=t.match(s);return o&&(!i||i[1]!=o[1]||i[2]!=o[2])?u(e,t):a(u(e,t),n)}function u(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));var n=t.split("/"),r=e.split("/");n.pop();while(curPart=r.shift())curPart==".."?n.pop():n.push(curPart);return n.join("/")}function a(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var n=/([^:])\/+/g,r=function(e){return e.replace(n,"$1/")},s=/[^\:\/]*:\/\/([^\/])*/,f=function(e,t,n,i){t=r(t),n=r(n);var s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,u,a,e;while(u=s.exec(e)){a=u[3]||u[2]||u[5]||u[6]||u[4];var f;i&&a.substr(0,1)=="/"?f=i+a:f=o(a,t,n);var l=u[5]||u[6]?1:0;e=e.substr(0,s.lastIndex-a.length-l-1)+f+e.substr(s.lastIndex-l-1),s.lastIndex=s.lastIndex+(f.length-a.length)}return e};return f.convertURIBase=o,f}),define("css",["./normalize"],function(e){function n(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var t=0;if(typeof window=="undefined")return{load:function(e,t,n){n()}};var r=!1,i=document.getElementsByTagName("head")[0],s=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/),o=!1;!s||(s[1]||s[7]?(o=parseInt(s[1])<6||parseInt(s[7])<=9,s="trident"):s[2]?(o=!0,s="webkit"):s[3]||(s[4]?(o=parseInt(s[4])<18,s="gecko"):r&&alert("Engine detection failed")));var u={},a=/^\/|([^\:\/]*:)/;u.pluginBuilder="./css-builder";var f=[],l={},c=[];u.addBuffer=function(e){if(n(f,e)!=-1)return;if(n(c,e)!=-1)return;f.push(e),c.push(e)},u.setBuffer=function(t,n){var r=window.location.pathname.split("/");r.pop(),r=r.join("/")+"/";var i=require.toUrl("base_url").split("/");i.pop();var s=i.join("/")+"/";s=e.convertURIBase(s,r,"/"),s.match(a)||(s="/"+s),s.substr(s.length-1,1)!="/"&&(s+="/"),u.inject(e(t,s,r));for(var o=0;o<f.length;o++)(n&&f[o].substr(f[o].length-5,5)==".less"||!n&&f[o].substr(f[o].length-4,4)==".css")&&(function(e){l[e]=l[e]||!0,setTimeout(function(){typeof l[e]=="function"&&l[e](),delete l[e]},7)}(f[o]),f.splice(o--,1))},u.attachBuffer=function(e,t){for(var r=0;r<f.length;r++)if(f[r]==e)return l[e]=t,!0;if(l[e]===!0)return l[e]=t,!0;if(n(c,e)!=-1)return t(),!0};var h=function(e,t){setTimeout(function(){for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n];if(r.href==e.href)return t()}h(e,t)},10)},p=function(e,t){setTimeout(function(){try{return e.sheet.cssRules,t()}catch(n){}p(e,t)},10)};if(s=="trident"&&o)var d=[],v=[],m=0,g=function(e,t){var n;v.push({url:e,cb:t}),n=d.shift(),!n&&m++<31&&(n=document.createElement("style"),i.appendChild(n)),n&&y(n)},y=function(e){var t=v.shift();if(!t){e.onload=w,d.push(e);return}e.onload=function(){t.cb(t.ss),y(e)};try{var n=e.styleSheet;t.ss=n.imports[n.addImport(t.url)]}catch(r){alert("Got Error:"+r)}};var b=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},w=function(){};u.linkLoad=function(e,t){var n=setTimeout(function(){r&&alert("timeout"),t()},A*1e3-100),u=function(){clearTimeout(n),a&&(a.onload=w),setTimeout(t,7)};if(!o){var a=b(e);a.onload=u,i.appendChild(a)}else if(s=="webkit"){var a=b(e);h(a,u),i.appendChild(a)}else if(s=="gecko"){var f=document.createElement("style");f.textContent='@import "'+e+'"',p(f,u),i.appendChild(f)}else s=="trident"&&g(e,u)};var E=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],S={},x=function(e,t,n){if(S[e]){t(S[e]);return}var r,i,s;if(typeof XMLHttpRequest!="undefined")r=new XMLHttpRequest;else if(typeof ActiveXObject!="undefined")for(i=0;i<3;i+=1){s=E[i];try{r=new ActiveXObject(s)}catch(o){}if(r){E=[s];break}}r.open("GET",e,requirejs.inlineRequire?!1:!0),r.onreadystatechange=function(i){var s,o;r.readyState===4&&(s=r.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=r,n(o)):(S[e]=r.responseText,t(r.responseText)))},r.send(null)},T=0,N;u.inject=function(e){T<31&&(N=document.createElement("style"),N.type="text/css",i.appendChild(N),T++),N.styleSheet?N.styleSheet.cssText+=e:N.appendChild(document.createTextNode(e))};var C=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g,k=window.location.pathname.split("/");k.pop(),k=k.join("/")+"/";var L=function(t,n,r){t.match(a)||(t="/"+e.convertURIBase(t,k,"/")),x(t,function(i){i=e(i,t,k);var s=[],o=[],u=[],a;while(a=C.exec(i)){var f=a[4]||a[5]||a[7]||a[8]||a[9];s.push(f),o.push(C.lastIndex-a[0].length),u.push(a[0].length)}var l=0;for(var c=0;c<s.length;c++)(function(e){L(s[e],function(t){i=i.substr(0,o[e])+t+i.substr(o[e]+u[e]);var r=t.length-u[e];for(var a=e+1;a<s.length;a++)o[a]+=r;l++,l==s.length&&n(i)},r)})(c);s.length==0&&n(i)},r)};u.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)};var A,O=!1;return u.load=function(e,t,n,i,s){A=A||i.waitSeconds||7;var a=e+(s?".less":".css");if(u.attachBuffer(a,n))return;var f=t.toUrl(a);!O&&r&&(alert(o?"hacking links":"not hacking"),O=!0),s?L(f,function(e){s&&(e=s(e,function(e){u.inject(e),setTimeout(n,7)}))}):u.linkLoad(f,n)},r&&(u.inspect=function(){if(stylesheet.styleSheet)return stylesheet.styleSheet.cssText;if(stylesheet.innerHTML)return stylesheet.innerHTML}),u}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/admin-layerrights/css/style.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,function(){var e;e=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return e.nodeName.toUpperCase()==="OPTGROUP"?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,r,i,s,o;t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,children:0,disabled:e.disabled}),s=e.childNodes,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(this.add_option(n,t,e.disabled));return o},e.prototype.add_option=function(e,t,n){if(e.nodeName.toUpperCase()==="OPTION")return e.text!==""?(t!=null&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:n===!0?n:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e}(),e.select_to_array=function(t){var n,r,i,s,o;r=new e,o=t.childNodes;for(i=0,s=o.length;i<s;i++)n=o[i],r.add_node(n);return r.parsed},this.SelectParser=e}.call(this),function(){var e,t;t=this,e=function(){function e(e,t){this.form_field=e,this.options=t!=null?t:{},this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:!0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(e){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(e){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},e.prototype.result_add_option=function(e){var t,n;return e.disabled?"":(e.dom_id=this.container_id+"_o_"+e.array_index,t=e.selected&&this.is_multiple?[]:["active-result"],e.selected&&t.push("result-selected"),e.group_array_index!=null&&t.push("group-option"),e.classes!==""&&t.push(e.classes),n=e.style.cssText!==""?' style="'+e.style+'"':"",'<li id="'+e.dom_id+'" class="'+t.join(" ")+'"'+n+">"+e.html+"</li>")},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(e){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.keyup_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale();switch(t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:e.preventDefault();if(this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.generate_field_id=function(){var e;return e=this.generate_random_id(),this.form_field.id=e,e},e.prototype.generate_random_char=function(){var e,t,n;return e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=Math.floor(Math.random()*e.length),t=e.substring(n,n+1)},e}(),t.AbstractChosen=e}.call(this),function(){var e,t,n,r,i={}.hasOwnProperty,s=function(e,t){function r(){this.constructor=e}for(var n in t)i.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};r=this,e=jQuery,e.fn.extend({chosen:function(n){var r,i,s;return s=navigator.userAgent.toLowerCase(),i=/(msie) ([\w.]+)/.exec(s)||[],r={name:i[1]||"",version:i[2]||"0"},r.name==="msie"&&(r.version==="6.0"||r.version==="7.0"&&document.documentMode===7)?this:this.each(function(r){var i;i=e(this);if(!i.hasClass("chzn-done"))return i.data("chosen",new t(this,n))})}}),t=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return s(i,t),i.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},i.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},i.prototype.set_up_html=function(){var t,r,i,s,o,u;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",t=["chzn-container"],t.push("chzn-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chzn-rtl"),this.f_width=this.form_field_jq.outerWidth(),i={id:this.container_id,"class":t.join(" "),style:"width: "+this.f_width+"px;",title:this.form_field.title},r=e("<div />",i),this.is_multiple?r.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):r.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(r),this.container=r,this.dropdown=this.container.find("div.chzn-drop").first(),s=this.container.height(),o=this.f_width-n(this.dropdown),this.dropdown.css({width:o+"px",top:s+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),u=o-n(this.search_container)-n(this.search_field),this.search_field.css({width:u+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},i.prototype.register_observers=function(){var e=this;return this.container.mousedown(function(t){e.container_mousedown(t)}),this.container.mouseup(function(t){e.container_mouseup(t)}),this.container.mouseenter(function(t){e.mouse_enter(t)}),this.container.mouseleave(function(t){e.mouse_leave(t)}),this.search_results.mouseup(function(t){e.search_results_mouseup(t)}),this.search_results.mouseover(function(t){e.search_results_mouseover(t)}),this.search_results.mouseout(function(t){e.search_results_mouseout(t)}),this.form_field_jq.bind("liszt:updated",function(t){e.results_update_field(t)}),this.form_field_jq.bind("liszt:activate",function(t){e.activate_field(t)}),this.form_field_jq.bind("liszt:open",function(t){e.container_mousedown(t)}),this.search_field.blur(function(t){e.input_blur(t)}),this.search_field.keyup(function(t){e.keyup_checker(t)}),this.search_field.keydown(function(t){e.keydown_checker(t)}),this.search_field.focus(function(t){e.input_focus(t)}),this.is_multiple?this.search_choices.click(function(t){e.choices_click(t)}):this.container.click(function(e){e.preventDefault()})},i.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)},i.prototype.container_mousedown=function(t){var n;if(!this.is_disabled)return n=t!=null?e(t.target).hasClass("search-choice-close"):!1,t&&t.type==="mousedown"&&!this.results_showing&&t.preventDefault(),!this.pending_destroy_click&&!n?(this.active_field?!this.is_multiple&&t&&(e(t.target)[0]===this.selected_item[0]||e(t.target).parents("a.chzn-single").length)&&(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1},i.prototype.container_mouseup=function(e){if(e.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(e)},i.prototype.blur_test=function(e){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},i.prototype.close_field=function(){return e(document).unbind("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(t){return e(t.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){var e,t,n,i,s;this.parsing=!0,this.results_data=r.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),e="",s=this.results_data;for(n=0,i=s.length;n<i;n++)t=s[n],t.group?e+=this.result_add_group(t):t.empty||(e+=this.result_add_option(t),t.selected&&this.is_multiple?this.choice_build(t):t.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(t.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(e),this.parsing=!1},i.prototype.result_add_group=function(t){return t.disabled?"":(t.dom_id=this.container_id+"_g_"+t.array_index,'<li id="'+t.dom_id+'" class="group-result">'+e("<div />").text(t.label).html()+"</li>")},i.prototype.result_do_highlight=function(e){var t,n,r,i,s;if(e.length){this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),r=parseInt(this.search_results.css("maxHeight"),10),s=this.search_results.scrollTop(),i=r+s,n=this.result_highlight.position().top+this.search_results.scrollTop(),t=n+this.result_highlight.outerHeight();if(t>=i)return this.search_results.scrollTop(t-r>0?t-r:0);if(n<s)return this.search_results.scrollTop(n)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){var e;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return e=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:e+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},i.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},i.prototype.set_tab_index=function(e){var t;if(this.form_field_jq.attr("tabindex"))return t=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",t)},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n.length)return this.result_highlight=n,this.result_select(t),this.search_field.focus()},i.prototype.search_results_mouseover=function(t){var n;n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first();if(n)return this.result_do_highlight(n)},i.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result"))return this.result_clear_highlight()},i.prototype.choices_click=function(t){t.preventDefault();if(this.active_field&&!e(t.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},i.prototype.choice_build=function(t){var n,r,i,s=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(n=this.container_id+"_c_"+t.array_index,this.choices+=1,t.disabled?r='<li class="search-choice search-choice-disabled" id="'+n+'"><span>'+t.html+"</span></li>":r='<li class="search-choice" id="'+n+'"><span>'+t.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+t.array_index+'"></a></li>',this.search_container.before(r),i=e("#"+n).find("a").first(),i.click(function(e){return s.choice_destroy_link_click(e)}))},i.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),this.is_disabled?t.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(e(t.target)))},i.prototype.choice_destroy=function(e){if(this.result_deselect(e.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()},i.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},i.prototype.results_reset_cleanup=function(){return this.current_value=this.form_field_jq.val(),this.selected_item.find("abbr").remove()},i.prototype.result_select=function(e){var t,n,r,i;if(this.result_highlight)return t=this.result_highlight,n=t.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(t):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=t,this.selected_item.removeClass("chzn-default")),t.addClass("result-selected"),i=n.substr(n.lastIndexOf("_")+1),r=this.results_data[i],r.selected=!0,this.form_field.options[r.options_index].selected=!0,this.is_multiple?this.choice_build(r):(this.selected_item.find("span").first().text(r.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!e.metaKey&&!e.ctrlKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[r.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()},i.prototype.result_activate=function(e){return e.addClass("active-result")},i.prototype.result_deactivate=function(e){return e.removeClass("active-result")},i.prototype.result_deselect=function(t){var n,r;return r=this.results_data[t],this.form_field.options[r.options_index].disabled?!1:(r.selected=!1,this.form_field.options[r.options_index].selected=!1,n=e("#"+this.container_id+"_o_"+t),n.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[r.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},i.prototype.winnow_results=function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;this.no_results_clear(),f=0,l=this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html(),o=this.search_contains?"":"^",s=new RegExp(o+l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),p=new RegExp(l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),y=this.results_data;for(d=0,m=y.length;d<m;d++){n=y[d];if(!n.disabled&&!n.empty)if(n.group)e("#"+n.dom_id).css("display","none");else if(!this.is_multiple||!n.selected){t=!1,a=n.dom_id,u=e("#"+a);if(s.test(n.html))t=!0,f+=1;else if(this.enable_split_word_search&&(n.html.indexOf(" ")>=0||n.html.indexOf("[")===0)){i=n.html.replace(/\[|\]/g,"").split(" ");if(i.length)for(v=0,g=i.length;v<g;v++)r=i[v],s.test(r)&&(t=!0,f+=1)}t?(l.length?(c=n.html.search(p),h=n.html.substr(0,c+l.length)+"</em>"+n.html.substr(c+l.length),h=h.substr(0,c)+"<em>"+h.substr(c)):h=n.html,u.html(h),this.result_activate(u),n.group_array_index!=null&&e("#"+this.results_data[n.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&a===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(u))}}return f<1&&l.length?this.no_results(l):this.winnow_results_set_highlight()},i.prototype.winnow_results_clear=function(){var t,n,r,i,s;this.search_field.val(""),n=this.search_results.find("li"),s=[];for(r=0,i=n.length;r<i;r++)t=n[r],t=e(t),t.hasClass("group-result")?s.push(t.css("display","auto")):!this.is_multiple||!t.hasClass("result-selected")?s.push(this.result_activate(t)):s.push(void 0);return s},i.prototype.winnow_results_set_highlight=function(){var e,t;if(!this.result_highlight){t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first();if(e!=null)return this.result_do_highlight(e)}},i.prototype.no_results=function(t){var n;return n=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(t),this.search_results.append(n)},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var t,n;this.result_highlight?this.results_showing&&(n=this.result_highlight.nextAll("li.active-result").first(),n&&this.result_do_highlight(n)):(t=this.search_results.find("li.active-result").first(),t&&this.result_do_highlight(e(t)));if(!this.results_showing)return this.results_show()},i.prototype.keyup_arrow=function(){var e;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())},i.prototype.keydown_backstroke=function(){var e;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke();e=this.search_container.siblings("li.search-choice").last();if(e.length&&!e.hasClass("search-choice-disabled"))return this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(e){var t,n;t=(n=e.which)!=null?n:e.keyCode,this.search_field_scale(),t!==8&&this.pending_backstroke&&this.clear_backstroke();switch(t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},i.prototype.search_field_scale=function(){var t,n,r,i,s,o,u,a,f;if(this.is_multiple){r=0,u=0,s="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(a=0,f=o.length;a<f;a++)i=o[a],s+=i+":"+this.search_field.css(i)+";";return n=e("<div />",{style:s}),n.text(this.search_field.val()),e("body").append(n),u=n.width()+25,n.remove(),u>this.f_width-10&&(u=this.f_width-10),this.search_field.css({width:u+"px"}),t=this.container.height(),this.dropdown.css({top:t+"px"})}},i.prototype.generate_random_id=function(){var t;t="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(e("#"+t).length>0)t+=this.generate_random_char();return t},i}(AbstractChosen),r.Chosen=t,n=function(e){var t;return t=e.outerWidth()-e.width()},r.get_side_border_padding=n}.call(this),define("libraries/chosen/chosen.jquery",function(){}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("libraries/chosen/chosen.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,Oskari.registerLocalization({lang:"fi",key:"admin-layerrights",value:{title:"Tasojen Oikeudet",desc:"desc",tile:{title:"Tasojen Oikeudet"},flyout:{title:"Tasojen Oikeuksien Hallinta",message:"Tasojen Oikeuksien Hallinta"},rights:{name:"Nimi",rightToPublish:"Julkaisuoikeus",rightToView:"Katseluoikeus",rightToDownload:"Latausoikeus",rightToPublishView:"Näkymän julkaisuoikeus"},save:"Tallenna",selectRole:"Rooli"}}),define("bundles/framework/bundle/admin-layerrights/locale/fi",function(){}),Oskari.registerLocalization({lang:"sv",key:"admin-layerrights",value:{title:"Layer Rights",desc:"desc",tile:{title:"Layer Rights"},flyout:{title:"Layer Rights Management",message:"Layer Rights Management"},rights:{name:"Namn",rightToPublish:"rätt att publicera",rightToView:"rätt att visa",rightToDownload:"rätt att ladda ner",rightToPublishView:"rätt att publicera en vy"},save:"save",selectRole:"Role"}}),define("bundles/framework/bundle/admin-layerrights/locale/sv",function(){}),Oskari.registerLocalization({lang:"en",key:"admin-layerrights",value:{title:"Layer Rights",desc:"desc",tile:{title:"Layer Rights"},flyout:{title:"Layer Rights Management",message:"Layer Rights Management"},rights:{name:"Name",rightToPublish:"Right to publish",rightToView:"Right to view",rightToDownload:"Right to download",rightToPublishView:"Right to publish a view"},save:"save",selectRole:"Role"}}),define("bundles/framework/bundle/admin-layerrights/locale/en",function(){}),define("src/framework/admin-layerrights/module",["oskari","jquery","bundles/framework/bundle/admin-layerrights/instance","bundles/framework/bundle/admin-layerrights/Flyout","bundles/framework/bundle/admin-layerrights/Tile","css!resources/framework/bundle/admin-layerrights/css/style.css","libraries/chosen/chosen.jquery","css!libraries/chosen/chosen.css","bundles/framework/bundle/admin-layerrights/locale/fi","bundles/framework/bundle/admin-layerrights/locale/sv","bundles/framework/bundle/admin-layerrights/locale/en"],function(e,t){return e.bundleCls("admin-layerrights").category({create:function(){var t=this,n=e.clazz.create("Oskari.framework.bundle.admin-layerrights.AdminLayerRightsBundleInstance","admin-layerrights","Oskari.framework.bundle.admin-layerrights.AdminLayerRightsFlyout");return n},update:function(e,t,n,r){}})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer(".admin-layerrights-layers .layer-rights-table {\n  margin-top: 20px; }\n  .admin-layerrights-layers .layer-rights-table th {\n    padding: 2px 5px; }\n  .admin-layerrights-layers .layer-rights-table th, .admin-layerrights-layers .layer-rights-table td {\n    text-align: center; }\n/* group Base */\r\n.chzn-container {\r\n  font-size: 13px;\r\n  position: relative;\r\n  display: inline-block;\r\n  zoom: 1;\r\n  *display: inline;\r\n}\r\n.chzn-container .chzn-drop {\r\n  background: #fff;\r\n  border: 1px solid #aaa;\r\n  border-top: 0;\r\n  position: absolute;\r\n  top: 29px;\r\n  left: 0;\r\n  -webkit-box-shadow: 0 4px 5px rgba(0,0,0,.15);\r\n  -moz-box-shadow   : 0 4px 5px rgba(0,0,0,.15);\r\n  box-shadow        : 0 4px 5px rgba(0,0,0,.15);\r\n  z-index: 1010;\r\n}\r\n/* @end */\r\n\r\n/* @group Single Chosen */\r\n.chzn-container-single .chzn-single {\r\n  background-color: #ffffff;\r\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#eeeeee', GradientType=0 );   \r\n  background-image: -webkit-gradient(linear, 0 0, 0 100%, color-stop(20%, #ffffff), color-stop(50%, #f6f6f6), color-stop(52%, #eeeeee), color-stop(100%, #f4f4f4));\r\n  background-image: -webkit-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);\r\n  background-image: -moz-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);\r\n  background-image: -o-linear-gradient(top, #ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%);\r\n  background-image: linear-gradient(#ffffff 20%, #f6f6f6 50%, #eeeeee 52%, #f4f4f4 100%); \r\n  -webkit-border-radius: 5px;\r\n  -moz-border-radius   : 5px;\r\n  border-radius        : 5px;\r\n  -moz-background-clip   : padding;\r\n  -webkit-background-clip: padding-box;\r\n  background-clip        : padding-box;\r\n  border: 1px solid #aaaaaa;\r\n  -webkit-box-shadow: 0 0 3px #ffffff inset, 0 1px 1px rgba(0,0,0,0.1);\r\n  -moz-box-shadow   : 0 0 3px #ffffff inset, 0 1px 1px rgba(0,0,0,0.1);\r\n  box-shadow        : 0 0 3px #ffffff inset, 0 1px 1px rgba(0,0,0,0.1);\r\n  display: block;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  position: relative;\r\n  height: 23px;\r\n  line-height: 24px;\r\n  padding: 0 0 0 8px;\r\n  color: #444444;\r\n  text-decoration: none;\r\n}\r\n.chzn-container-single .chzn-default {\r\n  color: #999;\r\n}\r\n.chzn-container-single .chzn-single span {\r\n  margin-right: 26px;\r\n  display: block;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  -o-text-overflow: ellipsis;\r\n  -ms-text-overflow: ellipsis;\r\n  text-overflow: ellipsis;\r\n}\r\n.chzn-container-single .chzn-single abbr {\r\n  display: block;\r\n  position: absolute;\r\n  right: 26px;\r\n  top: 6px;\r\n  width: 12px;\r\n  height: 12px;\r\n  font-size: 1px;\r\n  background: url('libraries/chosen/chosen-sprite.png') -42px 1px no-repeat;\r\n}\r\n.chzn-container-single .chzn-single abbr:hover {\r\n  background-position: -42px -10px;\r\n}\r\n.chzn-container-single.chzn-disabled .chzn-single abbr:hover {\r\n  background-position: -42px -10px;\r\n}\r\n.chzn-container-single .chzn-single div {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  display: block;\r\n  height: 100%;\r\n  width: 18px;\r\n}\r\n.chzn-container-single .chzn-single div b {\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat 0px 2px;\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.chzn-container-single .chzn-search {\r\n  padding: 3px 4px;\r\n  position: relative;\r\n  margin: 0;\r\n  white-space: nowrap;\r\n  z-index: 1010;\r\n}\r\n.chzn-container-single .chzn-search input {\r\n  background: #fff url('libraries/chosen/chosen-sprite.png') no-repeat 100% -20px;\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat 100% -20px, -webkit-gradient(linear, 0 0, 0 100%, color-stop(1%, #eeeeee), color-stop(15%, #ffffff));\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat 100% -20px, -webkit-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat 100% -20px, -moz-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat 100% -20px, -o-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat 100% -20px, linear-gradient(#eeeeee 1%, #ffffff 15%);\r\n  margin: 1px 0;\r\n  padding: 4px 20px 4px 5px;\r\n  outline: 0;\r\n  border: 1px solid #aaa;\r\n  font-family: sans-serif;\r\n  font-size: 1em;\r\n}\r\n.chzn-container-single .chzn-drop {\r\n  -webkit-border-radius: 0 0 4px 4px;\r\n  -moz-border-radius   : 0 0 4px 4px;\r\n  border-radius        : 0 0 4px 4px;\r\n  -moz-background-clip   : padding;\r\n  -webkit-background-clip: padding-box;\r\n  background-clip        : padding-box;\r\n  margin-top: 0px;\r\n  border-top: 1px solid #ccc;\r\n  border-top-right-radius: 4px;\r\n}\r\n/* @end */\r\n\r\n.chzn-container-single-nosearch .chzn-search input {\r\n  position: absolute;\r\n  left: -9000px;\r\n}\r\n\r\n/* @group Multi Chosen */\r\n.chzn-container-multi .chzn-choices {\r\n  background-color: #fff;\r\n  background-image: -webkit-gradient(linear, 0 0, 0 100%, color-stop(1%, #eeeeee), color-stop(15%, #ffffff));\r\n  background-image: -webkit-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\r\n  background-image: -moz-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\r\n  background-image: -o-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\r\n  background-image: linear-gradient(#eeeeee 1%, #ffffff 15%);\r\n  border: 1px solid #aaa;\r\n  margin: 0;\r\n  padding: 0;\r\n  cursor: text;\r\n  overflow: hidden;\r\n  height: auto !important;\r\n  height: 1%;\r\n  position: relative;\r\n}\r\n.chzn-container-multi .chzn-choices li {\r\n  float: left;\r\n  list-style: none;\r\n}\r\n.chzn-container-multi .chzn-choices .search-field {\r\n  white-space: nowrap;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.chzn-container-multi .chzn-choices .search-field input {\r\n  color: #666;\r\n  background: transparent !important;\r\n  border: 0 !important;\r\n  font-family: sans-serif;\r\n  font-size: 100%;\r\n  height: 15px;\r\n  padding: 5px;\r\n  margin: 1px 0;\r\n  outline: 0;\r\n  -webkit-box-shadow: none;\r\n  -moz-box-shadow   : none;\r\n  box-shadow        : none;\r\n}\r\n.chzn-container-multi .chzn-choices .search-field .default {\r\n  color: #999;\r\n}\r\n.chzn-container-multi .chzn-choices .search-choice {\r\n  -webkit-border-radius: 3px;\r\n  -moz-border-radius   : 3px;\r\n  border-radius        : 3px;\r\n  -moz-background-clip   : padding;\r\n  -webkit-background-clip: padding-box;\r\n  background-clip        : padding-box;\r\n  background-color: #e4e4e4;\r\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f4f4f4', endColorstr='#eeeeee', GradientType=0 ); \r\n  background-image: -webkit-gradient(linear, 0 0, 0 100%, color-stop(20%, #f4f4f4), color-stop(50%, #f0f0f0), color-stop(52%, #e8e8e8), color-stop(100%, #eeeeee));\r\n  background-image: -webkit-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  background-image: -moz-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  background-image: -o-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  background-image: linear-gradient(#f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%); \r\n  -webkit-box-shadow: 0 0 2px #ffffff inset, 0 1px 0 rgba(0,0,0,0.05);\r\n  -moz-box-shadow   : 0 0 2px #ffffff inset, 0 1px 0 rgba(0,0,0,0.05);\r\n  box-shadow        : 0 0 2px #ffffff inset, 0 1px 0 rgba(0,0,0,0.05);\r\n  color: #333;\r\n  border: 1px solid #aaaaaa;\r\n  line-height: 13px;\r\n  padding: 3px 20px 3px 5px;\r\n  margin: 3px 0 3px 5px;\r\n  position: relative;\r\n  cursor: default;\r\n}\r\n.chzn-container-multi .chzn-choices .search-choice.search-choice-disabled {\r\n  background-color: #e4e4e4;\r\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f4f4f4', endColorstr='#eeeeee', GradientType=0 );\r\n  background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, color-stop(20%, #f4f4f4), color-stop(50%, #f0f0f0), color-stop(52%, #e8e8e8), color-stop(100%, #eeeeee));\r\n  background-image: -webkit-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  background-image: -moz-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  background-image: -o-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  background-image: -ms-linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  background-image: linear-gradient(top, #f4f4f4 20%, #f0f0f0 50%, #e8e8e8 52%, #eeeeee 100%);\r\n  color: #666;\r\n  border: 1px solid #cccccc;\r\n  padding-right: 5px;\r\n}\r\n.chzn-container-multi .chzn-choices .search-choice-focus {\r\n  background: #d4d4d4;\r\n}\r\n.chzn-container-multi .chzn-choices .search-choice .search-choice-close {\r\n  display: block;\r\n  position: absolute;\r\n  right: 3px;\r\n  top: 4px;\r\n  width: 12px;\r\n  height: 12px;\r\n  font-size: 1px;\r\n  background: url('libraries/chosen/chosen-sprite.png') -42px 1px no-repeat;\r\n}\r\n.chzn-container-multi .chzn-choices .search-choice .search-choice-close:hover {\r\n  background-position: -42px -10px;\r\n}\r\n.chzn-container-multi .chzn-choices .search-choice-focus .search-choice-close {\r\n  background-position: -42px -10px;\r\n}\r\n/* @end */\r\n\r\n/* @group Results */\r\n.chzn-container .chzn-results {\r\n  margin: 0 4px 4px 0;\r\n  max-height: 240px;\r\n  padding: 0 0 0 4px;\r\n  position: relative;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  -webkit-overflow-scrolling: touch;\r\n}\r\n.chzn-container-multi .chzn-results {\r\n  margin: -1px 0 0;\r\n  padding: 0;\r\n}\r\n.chzn-container .chzn-results li {\r\n  display: none;\r\n  line-height: 15px;\r\n  padding: 5px 6px;\r\n  margin: 0;\r\n  list-style: none;\r\n}\r\n.chzn-container .chzn-results .active-result {\r\n  cursor: pointer;\r\n  display: list-item;\r\n}\r\n.chzn-container .chzn-results .highlighted {\r\n  background-color: #3875d7;\r\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3875d7', endColorstr='#2a62bc', GradientType=0 );  \r\n  background-image: -webkit-gradient(linear, 0 0, 0 100%, color-stop(20%, #3875d7), color-stop(90%, #2a62bc));\r\n  background-image: -webkit-linear-gradient(top, #3875d7 20%, #2a62bc 90%);\r\n  background-image: -moz-linear-gradient(top, #3875d7 20%, #2a62bc 90%);\r\n  background-image: -o-linear-gradient(top, #3875d7 20%, #2a62bc 90%);\r\n  background-image: linear-gradient(#3875d7 20%, #2a62bc 90%);\r\n  color: #fff;\r\n}\r\n.chzn-container .chzn-results li em {\r\n  background: #feffde;\r\n  font-style: normal;\r\n}\r\n.chzn-container .chzn-results .highlighted em {\r\n  background: transparent;\r\n}\r\n.chzn-container .chzn-results .no-results {\r\n  background: #f4f4f4;\r\n  display: list-item;\r\n}\r\n.chzn-container .chzn-results .group-result {\r\n  cursor: default;\r\n  color: #999;\r\n  font-weight: bold;\r\n}\r\n.chzn-container .chzn-results .group-option {\r\n  padding-left: 15px;\r\n}\r\n.chzn-container-multi .chzn-drop .result-selected {\r\n  display: none;\r\n}\r\n.chzn-container .chzn-results-scroll {\r\n  background: white;\r\n  margin: 0 4px;\r\n  position: absolute;\r\n  text-align: center;\r\n  width: 321px; /* This should by dynamic with js */\r\n  z-index: 1;\r\n}\r\n.chzn-container .chzn-results-scroll span {\r\n  display: inline-block;\r\n  height: 17px;\r\n  text-indent: -5000px;\r\n  width: 9px;\r\n}\r\n.chzn-container .chzn-results-scroll-down {\r\n  bottom: 0;\r\n}\r\n.chzn-container .chzn-results-scroll-down span {\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat -4px -3px;\r\n}\r\n.chzn-container .chzn-results-scroll-up span {\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat -22px -3px;\r\n}\r\n/* @end */\r\n\r\n/* @group Active  */\r\n.chzn-container-active .chzn-single {\r\n  -webkit-box-shadow: 0 0 5px rgba(0,0,0,.3);\r\n  -moz-box-shadow   : 0 0 5px rgba(0,0,0,.3);\r\n  box-shadow        : 0 0 5px rgba(0,0,0,.3);\r\n  border: 1px solid #5897fb;\r\n}\r\n.chzn-container-active .chzn-single-with-drop {\r\n  border: 1px solid #aaa;\r\n  -webkit-box-shadow: 0 1px 0 #fff inset;\r\n  -moz-box-shadow   : 0 1px 0 #fff inset;\r\n  box-shadow        : 0 1px 0 #fff inset;\r\n  background-color: #eee;\r\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeeeee', endColorstr='#ffffff', GradientType=0 );\r\n  background-image: -webkit-gradient(linear, 0 0, 0 100%, color-stop(20%, #eeeeee), color-stop(80%, #ffffff));\r\n  background-image: -webkit-linear-gradient(top, #eeeeee 20%, #ffffff 80%);\r\n  background-image: -moz-linear-gradient(top, #eeeeee 20%, #ffffff 80%);\r\n  background-image: -o-linear-gradient(top, #eeeeee 20%, #ffffff 80%);\r\n  background-image: linear-gradient(#eeeeee 20%, #ffffff 80%);\r\n  -webkit-border-bottom-left-radius : 0;\r\n  -webkit-border-bottom-right-radius: 0;\r\n  -moz-border-radius-bottomleft : 0;\r\n  -moz-border-radius-bottomright: 0;\r\n  border-bottom-left-radius : 0;\r\n  border-bottom-right-radius: 0;\r\n  border-bottom: 1px solid #fff;\r\n  z-index: 1012;\r\n}\r\n.chzn-container-active .chzn-single-with-drop div {\r\n  background: transparent;\r\n  border-left: none;\r\n}\r\n.chzn-container-active .chzn-single-with-drop div b {\r\n  background-position: -18px 2px;\r\n}\r\n.chzn-container-active .chzn-choices {\r\n  -webkit-box-shadow: 0 0 5px rgba(0,0,0,.3);\r\n  -moz-box-shadow   : 0 0 5px rgba(0,0,0,.3);\r\n  box-shadow        : 0 0 5px rgba(0,0,0,.3);\r\n  border: 1px solid #5897fb;\r\n}\r\n.chzn-container-active .chzn-choices .search-field input {\r\n  color: #111 !important;\r\n}\r\n/* @end */\r\n\r\n/* @group Disabled Support */\r\n.chzn-disabled {\r\n  cursor: default;\r\n  opacity:0.5 !important;\r\n}\r\n.chzn-disabled .chzn-single {\r\n  cursor: default;\r\n}\r\n.chzn-disabled .chzn-choices .search-choice .search-choice-close {\r\n  cursor: default;\r\n}\r\n\r\n/* @group Right to Left */\r\n.chzn-rtl { text-align: right; }\r\n.chzn-rtl .chzn-single { padding: 0 8px 0 0; overflow: visible; }\r\n.chzn-rtl .chzn-single span { margin-left: 26px; margin-right: 0; direction: rtl; }\r\n\r\n.chzn-rtl .chzn-single div { left: 3px; right: auto; }\r\n.chzn-rtl .chzn-single abbr {\r\n  left: 26px;\r\n  right: auto;\r\n}\r\n.chzn-rtl .chzn-choices .search-field input { direction: rtl; }\r\n.chzn-rtl .chzn-choices li { float: right; }\r\n.chzn-rtl .chzn-choices .search-choice { padding: 3px 5px 3px 19px; margin: 3px 5px 3px 0; }\r\n.chzn-rtl .chzn-choices .search-choice .search-choice-close { left: 4px; right: auto; }\r\n.chzn-rtl.chzn-container-single .chzn-results { margin: 0 0 4px 4px; padding: 0 4px 0 0; }\r\n.chzn-rtl .chzn-results .group-option { padding-left: 0; padding-right: 15px; }\r\n.chzn-rtl.chzn-container-active .chzn-single-with-drop div { border-right: none; }\r\n.chzn-rtl .chzn-search input {\r\n  background: #fff url('libraries/chosen/chosen-sprite.png') no-repeat -30px -20px;\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat -30px -20px, -webkit-gradient(linear, 0 0, 0 100%, color-stop(1%, #eeeeee), color-stop(15%, #ffffff));\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat -30px -20px, -webkit-linear-gradient(top, #eeeeee 1%, #ffffff 15%);  \r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat -30px -20px, -moz-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat -30px -20px, -o-linear-gradient(top, #eeeeee 1%, #ffffff 15%);\r\n  background: url('libraries/chosen/chosen-sprite.png') no-repeat -30px -20px, linear-gradient(#eeeeee 1%, #ffffff 15%);\r\n  padding: 4px 5px 4px 20px;\r\n  direction: rtl;\r\n}\r\n.chzn-container-single.chzn-rtl .chzn-single div b {\r\n  background-position: 6px 2px;\r\n}\r\n.chzn-container-single.chzn-rtl .chzn-single-with-drop div b {\r\n  background-position: -12px 2px;\r\n}\r\n/* @end */\r\n\r\n/* @group Retina compatibility */\r\n@media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-resolution: 144dpi)  {\r\n  .chzn-rtl .chzn-search input, .chzn-container-single .chzn-single abbr, .chzn-container-single .chzn-single div b, .chzn-container-single .chzn-search input, .chzn-container-multi .chzn-choices .search-choice .search-choice-close, .chzn-container .chzn-results-scroll-down span, .chzn-container .chzn-results-scroll-up span {\r\n      background-image: url('libraries/chosen/chosen-sprite@2x.png') !important;\r\n      background-repeat: no-repeat !important;\r\n      background-size: 52px 37px !important;\r\n  }\r\n}\r\n/* @end */\r\n")}),requirejs.s.contexts._.nextTick=requirejs.nextTick;
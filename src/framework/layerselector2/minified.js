Oskari.clazz.define("Oskari.mapframework.bundle.layerselector2.LayerSelectorBundleInstance",function(){this.sandbox=null,this.started=!1,this.plugins={},this.localization=null},{__name:"LayerSelector",getName:function(){return this.__name},setSandbox:function(e){this.sandbox=e},getSandbox:function(){return this.sandbox},getLocalization:function(e){return this._localization||(this._localization=Oskari.getLocalization(this.getName())),e?this._localization[e]:this._localization},start:function(){var e=this,t=e.conf,n=t?t.sandbox:"sandbox",r=Oskari.getSandbox(n),i,s,o,u,a;if(e.started)return;e.started=!0,e.sandbox=r,r.register(e);for(a in e.eventHandlers)e.eventHandlers.hasOwnProperty(a)&&r.registerForEventByName(e,a);i=r.getRequestBuilder("userinterface.AddExtensionRequest")(e),r.request(e,i),e.createUi(),s=e.sandbox.getService("Oskari.mapframework.service.MapLayerService"),r.registerAsStateful(e.mediator.bundleId,e),o=function(){},u=function(){alert(e.getLocalization("errors").loadFailed)},s.loadAllLayersAjax(o,u)},init:function(){return null},update:function(){},onEvent:function(e){var t=this.eventHandlers[e.getName()];if(!t)return;return t.apply(this,[e])},eventHandlers:{AfterMapLayerRemoveEvent:function(e){this.plugins["Oskari.userinterface.Flyout"].handleLayerSelectionChanged(e.getMapLayer(),!1)},AfterMapLayerAddEvent:function(e){this.plugins["Oskari.userinterface.Flyout"].handleLayerSelectionChanged(e.getMapLayer(),!0)},MapLayerEvent:function(e){var t=this,n=t.sandbox.getService("Oskari.mapframework.service.MapLayerService"),r=e.getLayerId(),i;e.getOperation()==="update"?(i=n.findMapLayer(r),t.plugins["Oskari.userinterface.Flyout"].handleLayerModified(i)):e.getOperation()==="add"?(i=n.findMapLayer(r),t.plugins["Oskari.userinterface.Flyout"].handleLayerAdded(i),t.plugins["Oskari.userinterface.Tile"].refresh()):e.getOperation()==="remove"?(t.plugins["Oskari.userinterface.Flyout"].handleLayerRemoved(r),t.plugins["Oskari.userinterface.Tile"].refresh()):e.getOperation()==="sticky"&&(i=n.findMapLayer(r),t.plugins["Oskari.userinterface.Flyout"].handleLayerSticky(i),t.plugins["Oskari.userinterface.Tile"].refresh())}},stop:function(){var e=this,t=e.sandbox(),n,r;for(r in e.eventHandlers)e.eventHandlers.hasOwnProperty(r)&&t.unregisterFromEventByName(e,r);n=t.getRequestBuilder("userinterface.RemoveExtensionRequest")(this),t.request(e,n),e.sandbox.unregisterStateful(e.mediator.bundleId),e.sandbox.unregister(e),e.started=!1},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.mapframework.bundle.layerselector2.Flyout",this),this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.mapframework.bundle.layerselector2.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null,this.plugins["Oskari.userinterface.Tile"]=null},getPlugins:function(){return this.plugins},getTitle:function(){return this.getLocalization("title")},getDescription:function(){return this.getLocalization("desc")},createUi:function(){var e=this;e.plugins["Oskari.userinterface.Flyout"].createUi(),e.plugins["Oskari.userinterface.Tile"].refresh()},setState:function(e){this.plugins["Oskari.userinterface.Flyout"].setContentState(e)},getState:function(){return this.plugins["Oskari.userinterface.Flyout"].getContentState()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]}),define("bundles/framework/bundle/layerselector2/instance",function(){}),Oskari.clazz.define("Oskari.mapframework.bundle.layerselector2.Flyout",function(e){this.instance=e,this.container=null,this.template=null,this.state=null,this.layerTabs=[]},{getName:function(){return"Oskari.mapframework.bundle.layerselector2.Flyout"},setEl:function(e,t,n){this.container=e[0],jQuery(this.container).hasClass("layerselector2")||jQuery(this.container).addClass("layerselector2")},startPlugin:function(){var e=this,t=Oskari.clazz.create("Oskari.mapframework.bundle.layerselector2.view.LayersTab",e.instance,e.instance.getLocalization("filter").inspire),n=Oskari.clazz.create("Oskari.mapframework.bundle.layerselector2.view.LayersTab",e.instance,e.instance.getLocalization("filter").organization),r;e.template=jQuery('<div class="allLayersTabContent"></div>'),t.groupingMethod="getInspireName",n.groupingMethod="getOrganizationName",e.layerTabs.push(t),e.layerTabs.push(n),e.instance.conf&&e.instance.conf.showPublishedTab===!0&&(r=Oskari.clazz.create("Oskari.mapframework.bundle.layerselector2.view.PublishedLayersTab",e.instance,e.instance.getLocalization("filter").published),this.layerTabs.push(r))},stopPlugin:function(){},getTitle:function(){return this.instance.getLocalization("title")},getDescription:function(){return this.instance.getLocalization("desc")},getOptions:function(){},setState:function(e){this.state=e},setContentState:function(e){var t,n;e||(e={});for(t=0;t<this.layerTabs.length;t+=1)n=this.layerTabs[t],n.getTitle()===e.tab&&(this.tabContainer.select(n.getTabPanel()),n.setState(e))},getContentState:function(){var e={},t,n;for(t=0;t<this.layerTabs.length;t+=1){n=this.layerTabs[t];if(this.tabContainer.isSelected(n.getTabPanel())){e=n.getState();break}}return e},createUi:function(){var e=this,t=jQuery(this.container),n,r;t.empty(),e.tabContainer=Oskari.clazz.create("Oskari.userinterface.component.TabContainer"),e.tabContainer.insertTo(t);for(n=0;n<e.layerTabs.length;n+=1)r=e.layerTabs[n],e.tabContainer.addPanel(r.getTabPanel());e.populateLayers()},populateLayers:function(){var e=this.instance.getSandbox(),t=e.getService("Oskari.mapframework.service.MapLayerService"),n=t.getAllLayers(),r,i,s,o;for(r=0;r<this.layerTabs.length;r+=1)i=this.layerTabs[r],i.groupingMethod&&(s=n.slice(0),o=this._getLayerGroups(s,i.groupingMethod),i.showLayerGroups(o))},_getLayerGroups:function(e,t){var n=this,r=[],i=null,s,o,u;e.sort(function(e,r){return n._layerListComparator(e,r,t)});for(s=0;s<e.length;s+=1){o=e[s];if(o.getMetaType&&o.getMetaType()==="published")continue;u=o[t]();if(!i||i.getTitle()!==u)i=Oskari.clazz.create("Oskari.mapframework.bundle.layerselector2.model.LayerGroup",u),r.push(i);i.addLayer(o)}return r},_layerListComparator:function(e,t,n){var r=e[n]().toLowerCase(),i=t[n]().toLowerCase();return r===i&&e.getName()&&t.getName()&&(r=e.getName().toLowerCase(),i=t.getName().toLowerCase()),r<i?-1:r>i?1:0},handleLayerSelectionChanged:function(e,t){var n,r;for(n=0;n<this.layerTabs.length;n+=1)r=this.layerTabs[n],r.setLayerSelected(e.getId(),t)},handleLayerModified:function(e){var t=this,n,r;for(n=0;n<t.layerTabs.length;n+=1)r=t.layerTabs[n],r.updateLayerContent(e.getId(),e)},handleLayerSticky:function(e){var t=this,n,r;for(n=0;n<t.layerTabs.length;n+=1)r=t.layerTabs[n],r.updateLayerContent(e.getId(),e)},handleLayerAdded:function(e){var t=this;t.populateLayers()},handleLayerRemoved:function(e){var t=this;t.populateLayers()}},{protocol:["Oskari.userinterface.Flyout"]}),define("bundles/framework/bundle/layerselector2/Flyout",function(){}),Oskari.clazz.define("Oskari.mapframework.bundle.layerselector2.Tile",function(e){this.instance=e,this.container=null,this.template=null},{getName:function(){return"Oskari.mapframework.bundle.layerselector2.Tile"},setEl:function(e,t,n){this.container=jQuery(e)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return this.instance.getLocalization("title")},getDescription:function(){return this.instance.getLocalization("desc")},getOptions:function(){},setState:function(e){},refresh:function(){}},{protocol:["Oskari.userinterface.Tile"]}),define("bundles/framework/bundle/layerselector2/Tile",function(){}),Oskari.clazz.define("Oskari.mapframework.bundle.layerselector2.model.LayerGroup",function(e){this.name=e,this.layers=[],this.searchIndex={}},{setTitle:function(e){this.name=e},getTitle:function(){return this.name},addLayer:function(e){this.layers.push(e),this.searchIndex[e.getId()]=this._getSearchIndex(e)},getLayers:function(){return this.layers},_getSearchIndex:function(e){var t=e.getName()+" "+e.getInspireName()+" "+e.getOrganizationName();return t.toLowerCase()},matchesKeyword:function(e,t){var n=this.searchIndex[e];return n.indexOf(t.toLowerCase())!==-1}}),define("bundles/framework/bundle/layerselector2/model/LayerGroup",function(){}),Oskari.clazz.define("Oskari.mapframework.bundle.layerselector2.view.Layer",function(e,t,n){this.sandbox=t,this.localization=n,this.layer=e,this.backendStatus="OK",this.ui=this._createLayerContainer(e)},{__template:'<div class="layer"><input type="checkbox" /> <div class="layer-tools"><div class="layer-backendstatus-icon backendstatus-ok"></div><div class="layer-icon"></div><div class="layer-info"></div></div><div class="layer-title"></div></div>',getId:function(){return this.layer.getId()},setVisible:function(e){e==1?this.ui.show():this.ui.hide()},setSelected:function(e){this.ui.find("input").attr("checked",e==1)},updateLayerContent:function(e){var t=e.getName(),n=this.backendStatus,r=e.getBackendStatus(),i=this.localization.backendStatus,s=n?i.prevBackendStatus:null,o=r?i.currBackendStatus:null,u=s?s.iconClass:null,a=o?o.iconClass:null,f=s?s.tooltip:null,l=o?o.tooltip:null,c=this.ui.find(".layer-backendstatus-icon");this.ui.find(".layer-title").html(t),e.isSticky()&&this.ui.find("input").attr("disabled","disabled"),u&&u!==a&&c.removeClass(u),a&&u!==a&&c.addClass(a),l?f!==l&&c.attr("title",l):f&&c.attr("title",""),this.backendStatus=r},getContainer:function(){return this.ui},_createLayerContainer:function(e){var t=this,n=t.sandbox,r=jQuery(this.__template),i=this.localization.tooltip,s=jQuery(r).find("div.layer-tools"),o=s.find("div.layer-icon"),u,a,f,l,c,h,p,d,v,m;o.addClass(e.getIconClassname()),e.isBaseLayer()?o.attr("title",i["type-base"]):e.isLayerOfType("WMS")?o.attr("title",i["type-wms"]):e.isLayerOfType("WMTS")?o.attr("title",i["type-wms"]):e.isLayerOfType("WFS")?o.attr("title",i["type-wfs"]):e.isLayerOfType("VECTOR")&&o.attr("title",i["type-wms"]);if(!e.getMetadataIdentifier()){c=e.getSubLayers(),subLmeta=!1;if(c&&c.length>0){subLmeta=!0;for(h=0;h<c.length;h+=1){p=c[h].getMetadataIdentifier();if(!p||p==""){subLmeta=!1;break}}}}if(e.getMetadataIdentifier()||subLmeta)s.find("div.layer-info").addClass("icon-info"),s.find("div.layer-info").click(function(){u="catalogue.ShowMetadataRequest",a=e.getMetadataIdentifier(),f=[],l={},l[a]=!0,c=e.getSubLayers();if(c&&c.length>0)for(h=0;h<c.length;h+=1)p=c[h].getMetadataIdentifier(),p&&p!==""&&!l[p]&&(l[p]=!0,f.push({uuid:p}));n.postRequestByName(u,[{uuid:a},f])});return jQuery(r).attr("layer_id",e.getId()),jQuery(r).find(".layer-title").append(e.getName()),jQuery(r).find("input").change(function(){d=jQuery(this),d.is(":checked")?n.postRequestByName("AddMapLayerRequest",[e.getId(),!1,e.isBaseLayer()]):n.postRequestByName("RemoveMapLayerRequest",[e.getId()])}),e.isSticky()&&jQuery(r).find("input").attr("disabled","disabled"),v=s.find(".layer-backendstatus-icon"),v.click(function(){m=e.getId(),n.postRequestByName("ShowMapLayerInfoRequest",[m])}),r}},{protocol:["Oskari.mapframework.module.Module"]}),define("bundles/framework/bundle/layerselector2/view/Layer",function(){}),Oskari.clazz.define("Oskari.mapframework.bundle.layerselector2.view.LayersTab",function(e,t){this.instance=e,this.title=t,this.showSearchSuggestions=e.conf&&e.conf.showSearchSuggestions===!0,this.layerGroups=[],this.layerContainers={},this.templates={spinner:'<span class="spinner-text"></span>',shortDescription:'<div class="field-description"></div>',description:'<div><h4 class="indicator-msg-popup"></h4><p></p></div>',relatedKeywords:'<div class="related-keywords"></div>',keywordsTitle:'<div class="keywords-title"></div>',keywordContainer:'<a href="#"class="keyword-cont"><span class="keyword"></span></a>',keywordType:'<div class="type"></div>'},this._createUI()},{getTitle:function(){return this.title},getTabPanel:function(){return this.tabPanel},getState:function(){var e={tab:this.getTitle(),filter:this.filterField.getValue(),groups:[]};return e},setState:function(e){if(!e)return;e.filter||(this.filterField.setValue(e.filter),this.filterLayers(e.filter))},_createInfoIcon:function(e){var t=this,n=jQuery('<div class="icon-info"></div>'),r=e.find(".field-description");r.find(".icon-info").remove(),r.append(n),n.click(function(e){var n=jQuery(t.templates.description),r=Oskari.clazz.create("Oskari.userinterface.component.Popup"),i=Oskari.clazz.create("Oskari.userinterface.component.Button");n.find("p").text(t._locale.filter.description),i.setTitle(t._locale.buttons.ok),i.addClass("primary"),i.setHandler(function(){r.close(!0)}),r.show(t._locale.filter.text,n,[i])})},_createUI:function(){var e=this,t;e._locale=e.instance._localization,e.tabPanel=Oskari.clazz.create("Oskari.userinterface.component.TabPanel"),e.tabPanel.setTitle(e.title),t=e.getFilterField().getField(),e.showSearchSuggestions&&(t.append(jQuery(e.templates.spinner).text(e._locale.loading)),t.append(jQuery(e.templates.relatedKeywords))),t.append(jQuery(e.templates.shortDescription).text(e._locale.filter.shortDescription)),e._createInfoIcon(t),e.tabPanel.getContainer().append(t),t.find(".spinner-text").hide(),e.accordion=Oskari.clazz.create("Oskari.userinterface.component.Accordion"),e.accordion.insertTo(e.tabPanel.getContainer())},getFilterField:function(){var e=this,t,n=0;return e.filterField?e.filterField:(t=Oskari.clazz.create("Oskari.userinterface.component.FormInput"),t.setPlaceholder(e.instance.getLocalization("filter").text),t.addClearButton(),t.bindChange(function(r){r.stopPropagation();var i=r;n&&clearTimeout(n),n=setTimeout(function(){e._fireFiltering(t.getValue(),i,e),n=null},300)},!0),e.filterField=t,t)},_fireFiltering:function(e,t,n){n.filterLayers(e),n.showSearchSuggestions&&(n.clearRelatedKeywordsPopup(e,jQuery(t.currentTarget).parents(".oskarifield")),n._relatedKeywordsPopup(e,t,n))},showLayerGroups:function(e){var t=this,n,r,i,s,o,u,a,f,l,c;t.accordion.removeAllPanels(),t.layerContainers=undefined,t.layerContainers={},t.layerGroups=e;for(n=0;n<e.length;n+=1){r=e[n],i=r.getLayers(),s=Oskari.clazz.create("Oskari.userinterface.component.AccordionPanel"),s.setTitle(r.getTitle()+" ("+i.length+")"),r.layerListPanel=s,o=s.getContainer();for(u=0;u<i.length;u+=1)a=i[u],f=Oskari.clazz.create("Oskari.mapframework.bundle.layerselector2.view.Layer",a,t.instance.sandbox,t.instance.getLocalization()),l=f.getContainer(),o.append(l),t.layerContainers[a.getId()]=f;t.accordion.addPanel(s)}c=t.instance.sandbox.findAllSelectedMapLayers();for(n=0;n<c.length;n+=1)t.setLayerSelected(c[n].getId(),!0);t.filterLayers(t.filterField.getValue())},filterLayers:function(e,t){var n=this,r=0,i,s,o,u,a,f,l,c,h,p;!t&&n.sentKeyword===e&&(t=n.ontologyLayers),n.accordion.showPanels();if(!e||e.length===0){n._showAllLayers();return}for(s=0;s<n.layerGroups.length;s+=1){u=n.layerGroups[s],f=u.getLayers(),i=0;for(o=0;o<f.length;o+=1)a=f[o],l=a.getId(),c=n.layerContainers[l],h=u.matchesKeyword(l,e)||n.showSearchSuggestions&&t&&n._arrayContains(t,l),c.setVisible(h),h&&(i+=1,i%2===1?c.getContainer().addClass("odd"):c.getContainer().removeClass("odd"),u.layerListPanel.open());u.layerListPanel.setVisible(i>0),u.layerListPanel.isVisible()&&(r+=1),u.layerListPanel.setTitle(u.getTitle()+" ("+i+"/"+f.length+")")}r===0?(p=n.instance.getLocalization("errors"),n.accordion.showMessage(p.noResults)):n.accordion.removeMessage()},clearRelatedKeywordsPopup:function(e,t){this.sentKeyword&&this.sentKeyword!==e&&t.find(".related-keywords").html("").hide()},_relatedKeywordsPopup:function(e,t,n){var r=jQuery(t.currentTarget).parents(".oskarifield"),i,s,o;if(!e||e.length===0){this._showAllLayers();return}if(e.length<4){r.find(".related-keywords").hide();return}s=r.find(".spinner-text").show(),n.sentKeyword=e,o=this.instance.sandbox.getAjaxUrl(),jQuery.ajax({type:"GET",dataType:"json",beforeSend:function(e){e&&e.overrideMimeType&&e.overrideMimeType("application/j-son;charset=UTF-8")},url:o+"action_route=SearchKeywords&keyword="+encodeURIComponent(e)+"&lang="+Oskari.getLang(),success:function(t){n.relatedKeywords=t,n._showRelatedKeywords(e,t,r),s.hide()},error:function(e,t){var r=n.instance.getLocalization("errors");n.accordion.showMessage(r.generic),s.hide()}})},_arrayContains:function(e,t){var n;if(e.indexOf)return e.indexOf(t)>-1;for(n=0;n<e.length;n+=1)if(e[n]===t)return!0;return!1},_concatNew:function(e,t){var n=this,r;for(r=t.length-1;r>=0;r-=1)n._arrayContains(e,t[r])||e.push(t[r])},_isDefined:function(e){return typeof e!="undefined"&&e!==null&&e!==""},_containsIgnoreCase:function(e,t){var n=this;return n._isDefined(e)&&n._isDefined(t)&&e.toLowerCase().indexOf(t.toLowerCase())>-1},_matchesIgnoreCase:function(e,t){var n=this;return n._isDefined(e)&&n._isDefined(t)&&e.toLowerCase()===t.toLowerCase()},_showRelatedKeywords:function(e,t,n){var r=this,i=r.getFilterField().getField().find(".related-keywords"),s,o,u,a=[],f=[];r.clearRelatedKeywordsPopup(null,n);if(t.length>0)for(s=0;s<t.length;s+=1)o=t[s],o.layers.length>0&&(r._matchesIgnoreCase(o.type,"syn")||!r._isDefined(o.type)&&r._containsIgnoreCase(o.keyword,e)?f.size===0?f.concat(o.layers):r._concatNew(f,o.layers):a.push({idx:s,count:o.layers.length}));a.length>0&&i.prepend(jQuery(r.templates.keywordsTitle).text(r._locale.filter.didYouMean)),a.sort(function(e,t){return e.count<t.count});for(s=0;s<a.length&&s<3;s+=1)o=t[a[s].idx],u=jQuery(r.templates.keywordContainer),u.attr("data-id",o.id).attr("data-keyword",o.keyword).find(".keyword").text(o.keyword.toLowerCase()+" ("+o.layers.length+")"),i.append(u);a.length&&i.show(),r.ontologyLayers=f,r.filterLayers(e,f),i.find(".keyword-cont").on("click",function(e){var t=jQuery(e.currentTarget).attr("data-keyword");r.getFilterField().setValue(t),r._fireFiltering(t,e,r)})},_showAllLayers:function(){var e,t,n,r,i,s,o;for(e=0;e<this.layerGroups.length;e+=1){t=this.layerGroups[e],n=t.getLayers();for(r=0;r<n.length;r+=1)i=n[r],s=i.getId(),o=this.layerContainers[s],o.setVisible(!0),r%2===1?o.getContainer().addClass("odd"):o.getContainer().removeClass("odd");t.layerListPanel.setVisible(!0),t.layerListPanel.close(),t.layerListPanel.setTitle(t.getTitle()+" ("+n.length+")")}},setLayerSelected:function(e,t){var n=this.layerContainers[e];n&&n.setSelected(t)},updateLayerContent:function(e,t){var n=this.layerContainers[e];n&&n.updateLayerContent(t)}}),define("bundles/framework/bundle/layerselector2/view/LayersTab",function(){}),Oskari.clazz.define("Oskari.mapframework.bundle.layerselector2.view.PublishedLayersTab",function(e,t){this.instance=e,this.title=t,this.layerGroups=[],this.layerContainers={},this._createUI()},{getTitle:function(){return this.title},getTabPanel:function(){return this.tabPanel},getState:function(){var e={tab:this.getTitle(),filter:this.filterField.getValue(),groups:[]};return e},setState:function(e){if(!e)return;e.filter||(this.filterField.setValue(e.filter),this.filterLayers(e.filter))},_createUI:function(){var e=this;e.tabPanel=Oskari.clazz.create("Oskari.userinterface.component.TabPanel"),e.tabPanel.setTitle(this.title),e.tabPanel.setSelectionHandler(function(t){t?e.tabSelected():e.tabUnselected()}),e.tabPanel.getContainer().append(this.getFilterField().getField()),e.accordion=Oskari.clazz.create("Oskari.userinterface.component.Accordion"),e.accordion.insertTo(this.tabPanel.getContainer())},getFilterField:function(){if(this.filterField)return this.filterField;var e=this,t=Oskari.clazz.create("Oskari.userinterface.component.FormInput");return t.setPlaceholder(e.instance.getLocalization("filter").text),t.addClearButton(),t.bindChange(function(n){e._searchTrigger(t.getValue())},!0),t.bindEnterKey(function(n){e._relatedSearchTrigger(t.getValue())}),this.filterField=t,t},_searchTrigger:function(e){var t=this;t.searchTimer&&clearTimeout(t.searchTimer),!e||e.length===0?t._search(e):t.searchTimer=setTimeout(function(){t._search(e),t.searchTimer=undefined},500)},_relatedSearchTrigger:function(e){var t=this;t.searchTimer&&clearTimeout(t.searchTimer)},tabSelected:function(){if(this.layerGroups.length===0){this.accordion.showMessage(this.instance.getLocalization("loading"));var e=this,t=this.instance.sandbox.getAjaxUrl();jQuery.ajax({type:"GET",dataType:"json",beforeSend:function(e){e&&e.overrideMimeType&&e.overrideMimeType("application/j-son;charset=UTF-8")},url:t+"action_route=GetPublishedMyPlaceLayers",success:function(t){e._populateLayerGroups(t),e.showLayerGroups(e.layerGroups)},error:function(t,n){var r=e.instance.getLocalization("errors");e.accordion.showMessage(r.generic)}})}},tabUnselected:function(){},_populateLayerGroups:function(e){var t=this,n=t.instance.getSandbox(),r=n.getService("Oskari.mapframework.service.MapLayerService"),i=n.getUser().getUuid(),s=null,o,u,a,f,l;this.layerGroups=[];for(o=0;o<e.length;o+=1){u=e[o];if(!s||s.getTitle()!==u.name)s=Oskari.clazz.create("Oskari.mapframework.bundle.layerselector2.model.LayerGroup",u.name),this.layerGroups.push(s);for(a=0;a<u.layers.length;a+=1)f=u.layers[a],l=this._getPublishedLayer(f,r,i===u.id),l.setDescription(u.name),s.addLayer(l)}},_getPublishedLayer:function(e,t,n){var r=this._getMapLayerJsonBase(),i;r.wmsUrl="/karttatiili/myplaces?myCat="+e.id+"&",r.name=e.name,r.id="myplaces_"+e.id,n?r.permissions={publish:"publication_permission_ok"}:r.permissions={publish:"no_publication_permission"},i=t.createMapLayer(r);if(!n)try{t.addLayer(i)}catch(s){}return i},_getMapLayerJsonBase:function(){var e=this.instance.getLocalization("published"),t={wmsName:"ows:my_places_categories",type:"wmslayer",isQueryable:!0,opacity:50,metaType:"published",orgName:e.organization,inspire:e.inspire};return t},showLayerGroups:function(e){var t=this,n,r,i,s,o,u,a,f,l,c,h;t.accordion.removeAllPanels(),t.layerContainers=undefined,t.layerContainers={},t.layerGroups=e;for(n=0;n<e.length;n+=1){r=e[n],i=r.getLayers(),o=Oskari.clazz.create("Oskari.userinterface.component.AccordionPanel"),o.setTitle(r.getTitle()+" ("+i.length+")"),r.layerListPanel=o,s=o.getContainer();for(u=0;u<i.length;u+=1)a=i[u],f=Oskari.clazz.create("Oskari.mapframework.bundle.layerselector2.view.Layer",a,t.instance.sandbox,t.instance.getLocalization()),l=f.getContainer(),s.append(l),t.layerContainers[a.getId()]=f;t.accordion.addPanel(o)}if(t.layerGroups.length===0)c=t.instance.getLocalization("errors"),t.accordion.showMessage(c.noResults);else{h=t.instance.sandbox.findAllSelectedMapLayers();for(n=0;n<h.length;n+=1)t.setLayerSelected(h[n].getId(),!0)}},_search:function(e){var t=this;if(!e||e.length===0){t.updateLayerContent();return}t.showLayerGroups([]),t.accordion.showMessage(this.instance.getLocalization("loading")),jQuery.ajax({type:"GET",dataType:"json",beforeSend:function(e){e&&e.overrideMimeType&&e.overrideMimeType("application/j-son;charset=UTF-8")},data:{searchKey:e},url:ajaxUrl+"action_route=FreeFindFromMyPlaceLayers",success:function(e){t._populateLayerGroups(e),t.showLayerGroups(t.layerGroups)},error:function(e,n){var r=t.instance.getLocalization("errors");t.accordion.showMessage(r.generic)}})},setLayerSelected:function(e,t){var n=this.layerContainers[e];n&&n.setSelected(t)},updateLayerContent:function(e,t){this.showLayerGroups([]),this.tabSelected()}}),define("bundles/framework/bundle/layerselector2/view/PublishedLayersTab",function(){}),define("normalize",["require","module"],function(e,t){function o(e,t,n){if(e.indexOf("data:")===0)return e;e=r(e);if(e.match(/^\//)||e.match(s))return e;var i=n.match(s),o=t.match(s);return o&&(!i||i[1]!=o[1]||i[2]!=o[2])?u(e,t):a(u(e,t),n)}function u(e,t){e.substr(0,2)=="./"&&(e=e.substr(2));var n=t.split("/"),r=e.split("/");n.pop();while(curPart=r.shift())curPart==".."?n.pop():n.push(curPart);return n.join("/")}function a(e,t){var n=t.split("/");n.pop(),t=n.join("/")+"/",i=0;while(t.substr(i,1)==e.substr(i,1))i++;while(t.substr(i,1)!="/")i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");out="";while(n.shift())out+="../";while(curPart=r.shift())out+=curPart+"/";return out.substr(0,out.length-1)}var n=/([^:])\/+/g,r=function(e){return e.replace(n,"$1/")},s=/[^\:\/]*:\/\/([^\/])*/,f=function(e,t,n,i){t=r(t),n=r(n);var s=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig,u,a,e;while(u=s.exec(e)){a=u[3]||u[2]||u[5]||u[6]||u[4];var f;i&&a.substr(0,1)=="/"?f=i+a:f=o(a,t,n);var l=u[5]||u[6]?1:0;e=e.substr(0,s.lastIndex-a.length-l-1)+f+e.substr(s.lastIndex-l-1),s.lastIndex=s.lastIndex+(f.length-a.length)}return e};return f.convertURIBase=o,f}),define("css",["./normalize"],function(e){function n(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var t=0;if(typeof window=="undefined")return{load:function(e,t,n){n()}};var r=!1,i=document.getElementsByTagName("head")[0],s=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/),o=!1;!s||(s[1]||s[7]?(o=parseInt(s[1])<6||parseInt(s[7])<=9,s="trident"):s[2]?(o=!0,s="webkit"):s[3]||(s[4]?(o=parseInt(s[4])<18,s="gecko"):r&&alert("Engine detection failed")));var u={},a=/^\/|([^\:\/]*:)/;u.pluginBuilder="./css-builder";var f=[],l={},c=[];u.addBuffer=function(e){if(n(f,e)!=-1)return;if(n(c,e)!=-1)return;f.push(e),c.push(e)},u.setBuffer=function(t,n){var r=window.location.pathname.split("/");r.pop(),r=r.join("/")+"/";var i=require.toUrl("base_url").split("/");i.pop();var s=i.join("/")+"/";s=e.convertURIBase(s,r,"/"),s.match(a)||(s="/"+s),s.substr(s.length-1,1)!="/"&&(s+="/"),u.inject(e(t,s,r));for(var o=0;o<f.length;o++)(n&&f[o].substr(f[o].length-5,5)==".less"||!n&&f[o].substr(f[o].length-4,4)==".css")&&(function(e){l[e]=l[e]||!0,setTimeout(function(){typeof l[e]=="function"&&l[e](),delete l[e]},7)}(f[o]),f.splice(o--,1))},u.attachBuffer=function(e,t){for(var r=0;r<f.length;r++)if(f[r]==e)return l[e]=t,!0;if(l[e]===!0)return l[e]=t,!0;if(n(c,e)!=-1)return t(),!0};var h=function(e,t){setTimeout(function(){for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n];if(r.href==e.href)return t()}h(e,t)},10)},p=function(e,t){setTimeout(function(){try{return e.sheet.cssRules,t()}catch(n){}p(e,t)},10)};if(s=="trident"&&o)var d=[],v=[],m=0,g=function(e,t){var n;v.push({url:e,cb:t}),n=d.shift(),!n&&m++<31&&(n=document.createElement("style"),i.appendChild(n)),n&&y(n)},y=function(e){var t=v.shift();if(!t){e.onload=w,d.push(e);return}e.onload=function(){t.cb(t.ss),y(e)};try{var n=e.styleSheet;t.ss=n.imports[n.addImport(t.url)]}catch(r){alert("Got Error:"+r)}};var b=function(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=e,t},w=function(){};u.linkLoad=function(e,t){var n=setTimeout(function(){r&&alert("timeout"),t()},A*1e3-100),u=function(){clearTimeout(n),a&&(a.onload=w),setTimeout(t,7)};if(!o){var a=b(e);a.onload=u,i.appendChild(a)}else if(s=="webkit"){var a=b(e);h(a,u),i.appendChild(a)}else if(s=="gecko"){var f=document.createElement("style");f.textContent='@import "'+e+'"',p(f,u),i.appendChild(f)}else s=="trident"&&g(e,u)};var E=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],S={},x=function(e,t,n){if(S[e]){t(S[e]);return}var r,i,s;if(typeof XMLHttpRequest!="undefined")r=new XMLHttpRequest;else if(typeof ActiveXObject!="undefined")for(i=0;i<3;i+=1){s=E[i];try{r=new ActiveXObject(s)}catch(o){}if(r){E=[s];break}}r.open("GET",e,requirejs.inlineRequire?!1:!0),r.onreadystatechange=function(i){var s,o;r.readyState===4&&(s=r.status,s>399&&s<600?(o=new Error(e+" HTTP status: "+s),o.xhr=r,n(o)):(S[e]=r.responseText,t(r.responseText)))},r.send(null)},T=0,N;u.inject=function(e){T<31&&(N=document.createElement("style"),N.type="text/css",i.appendChild(N),T++),N.styleSheet?N.styleSheet.cssText+=e:N.appendChild(document.createTextNode(e))};var C=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g,k=window.location.pathname.split("/");k.pop(),k=k.join("/")+"/";var L=function(t,n,r){t.match(a)||(t="/"+e.convertURIBase(t,k,"/")),x(t,function(i){i=e(i,t,k);var s=[],o=[],u=[],a;while(a=C.exec(i)){var f=a[4]||a[5]||a[7]||a[8]||a[9];s.push(f),o.push(C.lastIndex-a[0].length),u.push(a[0].length)}var l=0;for(var c=0;c<s.length;c++)(function(e){L(s[e],function(t){i=i.substr(0,o[e])+t+i.substr(o[e]+u[e]);var r=t.length-u[e];for(var a=e+1;a<s.length;a++)o[a]+=r;l++,l==s.length&&n(i)},r)})(c);s.length==0&&n(i)},r)};u.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)};var A,O=!1;return u.load=function(e,t,n,i,s){A=A||i.waitSeconds||7;var a=e+(s?".less":".css");if(u.attachBuffer(a,n))return;var f=t.toUrl(a);!O&&r&&(alert(o?"hacking links":"not hacking"),O=!0),s?L(f,function(e){s&&(e=s(e,function(e){u.inject(e),setTimeout(n,7)}))}):u.linkLoad(f,n)},r&&(u.inspect=function(){if(stylesheet.styleSheet)return stylesheet.styleSheet.cssText;if(stylesheet.innerHTML)return stylesheet.innerHTML}),u}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.addBuffer("resources/framework/bundle/layerselector2/css/style.css")}),requirejs.s.contexts._.nextTick=requirejs.nextTick,Oskari.registerLocalization({lang:"fi",key:"LayerSelector",value:{title:"Karttatasot",desc:"",errors:{title:"Virhe!",generic:"Järjestelmässä tapahtui virhe. Yritä uudelleen myöhemmin.",loadFailed:"Karttatasojen latauksessa tapahtui virhe. Lataa sivu selaimeesi uudelleen ja valitse karttatasot.",noResults:"Haulla ei löytynyt yhtään tulosta.",noResultsForKeyword:"Karttatasoja ei löydy tällä avainsanalla.",minChars:"Kirjoita ainakin 4 merkkiä."},loading:"Haetaan...",filter:{text:"Hae karttatasoja",keywordsTitle:"Avainsanat:",shortDescription:"Hae karttasoa nimeen, tiedontuottajaan ja avainsanaan perustuen.",description:"Voit hakea karttatasoja kirjoittamalla osan karttatason nimestä, tiedontuottajan nimestä tai karttatasoa kuvailevasta avainsanasta. Avainsanahaku käynnistyy, kun vähintään 4 merkkiä on kirjoitettu hakukenttään.",inspire:"Aiheittain",organization:"Tiedontuottajittain",published:"Käyttäjät",didYouMean:"Tarkoititko:"},published:{organization:"Julkaistu taso",inspire:"Julkaistu taso"},tooltip:{"type-base":"Taustakartta","type-wms":"Karttataso","type-wfs":"Tietotuote"},backendStatus:{OK:{tooltip:"Karttataso on saatavilla tällä hetkellä.",iconClass:"backendstatus-ok"},DOWN:{tooltip:"Karttataso ei ole saatavilla tällä hetkellä.",iconClass:"backendstatus-down"},MAINTENANCE:{tooltip:"Karttatason saatavuudessa on tiedossa käyttökatkoja lähipäivinä.",iconClass:"backendstatus-maintenance"},UNKNOWN:{tooltip:"",iconClass:"backendstatus-ok"}},buttons:{ok:"OK"},types:{syn:"Synonyymi",lk:"Lähikäsite",vk:"Vieruskäsite",ak:"Alakäsite",yk:"Yläkäsite"}}}),define("bundles/framework/bundle/layerselector2/locale/fi",function(){}),Oskari.registerLocalization({lang:"sv",key:"LayerSelector",value:{title:"Kartlager",desc:"",errors:{title:"Fel!",generic:"Systemfel. Försök på nytt senare.",loadFailed:"Fel i laddningen av kartlager. Ladda ned sidan på nytt i din läsare och välj kartlagren.",noResults:"ökningen gav inga resultat.",noResultsForKeyword:"Ökningen gav inga nyckelorden.",minChars:"Minsta längd är 4 bokstäver."},loading:"Söker...",filter:{text:"Sök kartlager",keywordsTitle:"Nyckerord:",shortDescription:"Sök kartlager efter namn, producent och nyckelord.",description:"Du kan söka kartlager genom att skriva några bokstäver som ingår i namnet, producent eller beskrivande nyckelord av den dataprodukt. Nyckelordsök börjär när du har skrivit minst 4 bokstäver.",inspire:"Enligt tema",organization:"Enligt dataproducent",published:"Användare",didYouMean:"Menade du:"},published:{organization:"Publicerad kartlager",inspire:"Publicerad kartlager"},tooltip:{"type-base":"Bakgrundskarta","type-wms":"kartlager","type-wfs":"Dataprodukt"},backendStatus:{OK:{tooltip:"Kartlagret är tillgängligt just nu.",iconClass:"backendstatus-ok"},DOWN:{tooltip:"Kartlagret är inte tillgängligt just nu.",iconClass:"backendstatus-down"},MAINTENANCE:{tooltip:"Avbrott i kartlagrets tillgänglighet är att vänta inom de närmaste dagarna.",iconClass:"backendstatus-maintenance"},UNKNOWN:{tooltip:"",iconClass:"backendstatus-ok"}},buttons:{ok:"OK"},types:{syn:"Synonym",lk:"Relaterat begrepp",vk:"Sidobegrepp",ak:"Underordnad begrepp",yk:"Överordnad begrepp"}}}),define("bundles/framework/bundle/layerselector2/locale/sv",function(){}),Oskari.registerLocalization({lang:"en",key:"LayerSelector",value:{title:"Map layers",desc:"",errors:{title:"Error!",generic:"System error. Please try again later.",loadFailed:"Error loading map layers. Reload the page in your browser and select map layers.",noResults:"The search returned no results.",noResultsForKeyword:"The search returned no keywords.",minChars:"Minimum length is 4 characters."},loading:"Searching...",filter:{text:"Search map layers",keywordsTitle:"Keywords:",shortDescription:"Search map layers by name, producer or keyword.",description:"You can search map layers by writing a part of the name, producer or keyword of the layer. Keyword search starts when at 4 least characters has been written.",inspire:"By theme",organization:"By data providers",published:"Users",didYouMean:"Did you mean:"},published:{organization:"Published map layer",inspire:"Published map layer"},tooltip:{"type-base":"Background map","type-wms":"Map layer","type-wfs":"Data product"},backendStatus:{OK:{tooltip:"The map layer is currently available.",iconClass:"backendstatus-ok"},DOWN:{tooltip:"The map layer is currently unavailable.",iconClass:"backendstatus-down"},MAINTENANCE:{tooltip:"The map layer may be periodically unavailable during the next few days.",iconClass:"backendstatus-maintenance"},UNKNOWN:{tooltip:"",iconClass:"backendstatus-ok"}},buttons:{ok:"OK"},types:{syn:"Synonym",lk:"Related concept",vk:"Coordinate concept",ak:"Subordinate concept",yk:"Superordinate concept"}}}),define("bundles/framework/bundle/layerselector2/locale/en",function(){}),Oskari.registerLocalization({lang:"cs",key:"LayerSelector",value:{title:"Mapové vrstvy",desc:"Vyberte mapové vrstvy",errors:{title:"Chyba!",generic:"Systémová chyba. Prosím, zkuste to později.",loadFailed:"Chyba při nahrávání mapových vrstvev. Načtěte stránku ve svém prohlížeči znovu a vyberte mapové vrstvy.",noResults:"Vyhledávání nevrátilo žádný výsledek.",noResultsForKeyword:"Vyhledávání nevrátilo žádný výsledek.",minChars:"Minimum length is 4 characters."},loading:"Nahrávám...",filter:{text:"Prohledat mapové vrstvy",keywordsTitle:"Keywords:",shortDescription:"Prohledat mapové vrstvy.",description:"You can search map layers by writing a part of the name or producer of the layer. By writing at 4 least characters and pushing enter key you can also search for keywords that are related to the layers. The number after the keyword in the list tells you how many map layers are related to it.",inspire:"Podle tématu",organization:"Podle poskytovatele dat",published:"Uživatelé",didYouMean:"Did you mean:"},published:{organization:"Publikovaná mapová vrstva",inspire:"Publikovaná mapová vrstva"},tooltip:{"type-base":"Mapa pozadí","type-wms":"Mapová vrstva","type-wfs":"Datový produkt"},backendStatus:{OK:{tooltip:"Mapový vrstva je nyní dostupná.",iconClass:"backendstatus-ok"},DOWN:{tooltip:"V současnosti není mapová vrstva dostupná.",iconClass:"backendstatus-down"},MAINTENANCE:{tooltip:"V následujících dnech může být mapová vrstva nedostupná.",iconClass:"backendstatus-maintenance"},UNKNOWN:{tooltip:"Informace o stavu mapové vrstvy je nedostupná",iconClass:"backendstatus-ok"}},buttons:{ok:"OK"},types:{syn:"Synonymum",lk:"Související koncepce",vk:"Koordinovat koncept",ak:"Podřízený pojem",yk:"Nadřazené koncepce"}}}),define("bundles/framework/bundle/layerselector2/locale/cs",function(){}),Oskari.registerLocalization({lang:"de",key:"LayerSelector",value:{title:"Kartenebenen",desc:"Wähle Kartenebenen",errors:{title:"Fehler!",generic:"Systemfehler. Bitte versuchen Sie es später noch einmal.",loadFailed:"Fehler beim Laden der Kartenebenen. Laden Sie die Webseite Ihres Browsers erneut und wählen Sie die Kartenebenen.",noResults:"Die Suche ergab keine Treffer.",noResultsForKeyword:"Die Suche ergab keine Stichworte.",minChars:"Minimum 4 Zeichen lang sein."},loading:"Lade...",filter:{text:"Suche Kartenebenen",keywordsTitle:"Stichworte:",shortDescription:"Suche Kartenebenen nach Name, Hersteller oder Stichworten.",description:"You can search map layers by writing a part of the name or producer of the layer. By writing at 4 least characters and pushing enter key you can also search for keywords that are related to the layers. The number after the keyword in the list tells you how many map layers are related to it.",inspire:"Nach Thema",organization:"Nach Datenanbieter",published:"Benutzer",didYouMean:"Meinten Sie:"},published:{organization:"Veröffentlichte Kartenebene",inspire:"Veröffentlichte Kartenebene"},tooltip:{"type-base":"Hintergrundkarte","type-wms":"Kartenebene","type-wfs":"Datenprodukt"},backendStatus:{OK:{tooltip:"Die Kartenebene ist derzeitig verfügbar.",iconClass:"backendstatus-ok"},DOWN:{tooltip:"Die Kartenebene ist derzeitig nicht verfügbar.",iconClass:"backendstatus-down"},MAINTENANCE:{tooltip:"Die Kartenebene könnte in den nächsten Tagen teilweise nicht verfügbar sein..",iconClass:"backendstatus-maintenance"},UNKNOWN:{tooltip:"Die Informationen zur Verfügbarkeit der Kartenebene liegen nicht vor.",iconClass:"backendstatus-ok"}},buttons:{ok:"OK"},types:{syn:"Synonym",lk:"Verwandte Konzept",vk:"Koordinieren Konzept",ak:"Untergeordnete Konzept",yk:"Ûbergeordnete Konzept"}}}),define("bundles/framework/bundle/layerselector2/locale/de",function(){}),Oskari.registerLocalization({lang:"es",key:"LayerSelector",value:{title:"Capas",desc:"Seleccionar capas",errors:{title:"¡Error!",generic:"¡Error del sistema! Por favor, inténtelo más tarde.",loadFailed:"¡Error cargando capas! Recargue la página en su navegador y seleccione las capas.",noResults:"La búsqueda no ha devuelto ningún resultado.",noResultsForKeyword:"La búsqueda no ha devuelto ningún resultado",minChars:"La longitud mínima es de 4 caracteres."},loading:"Cargando...",filter:{text:"Search map layers",keywordsTitle:"Keywords:",shortDescription:"Search map layers by name, producer or keyword.",description:"You can search map layers by writing a part of the name or producer of the layer. By writing at 4 least characters and pushing enter key you can also search for keywords that are related to the layers. The number after the keyword in the list tells you how many map layers are related to it.",inspire:"Por temas",organization:"Por proveedores de datos",published:"Usuarios",didYouMean:"Quiso decir:"},published:{organization:"Capa publicada",inspire:"Capa publicada"},tooltip:{"type-base":"Mapa de fondo","type-wms":"Capa","type-wfs":"Producto"},backendStatus:{OK:{tooltip:"La capa está actualmente disponible.",iconClass:"backendstatus-ok"},DOWN:{tooltip:"La capa no está actualmente disponible.",iconClass:"backendstatus-down"},MAINTENANCE:{tooltip:"La capa puede no estar disponible de manera intermitente durante los próximos días.",iconClass:"backendstatus-maintenance"},UNKNOWN:{tooltip:"La información sobre el estado de la capa no está disponible.",iconClass:"backendstatus-ok"}},buttons:{ok:"OK"},types:{syn:"Sinónimo",lk:"Concepto Relacionados",vk:"Coordinar Concepto",ak:"Concepto Subordinado",yk:"Concepto de Orden Superior"}}}),define("bundles/framework/bundle/layerselector2/locale/es",function(){}),define("src/framework/layerselector2/module",["oskari","jquery","bundles/framework/bundle/layerselector2/instance","bundles/framework/bundle/layerselector2/Flyout","bundles/framework/bundle/layerselector2/Tile","bundles/framework/bundle/layerselector2/model/LayerGroup","bundles/framework/bundle/layerselector2/view/Layer","bundles/framework/bundle/layerselector2/view/LayersTab","bundles/framework/bundle/layerselector2/view/PublishedLayersTab","css!resources/framework/bundle/layerselector2/css/style.css","bundles/framework/bundle/layerselector2/locale/fi","bundles/framework/bundle/layerselector2/locale/sv","bundles/framework/bundle/layerselector2/locale/en","bundles/framework/bundle/layerselector2/locale/cs","bundles/framework/bundle/layerselector2/locale/de","bundles/framework/bundle/layerselector2/locale/es"],function(e,t){return e.bundleCls("layerselector2").category({create:function(){var t=this,n=e.clazz.create("Oskari.mapframework.bundle.layerselector2.LayerSelectorBundleInstance");return n},update:function(e,t,n,r){}})}),requirejs.s.contexts._.nextTick=function(e){e()},require(["css"],function(e){e.setBuffer("/* layer group container */\r\ndiv.layerselector2 div.layerGroup {\r\n  background-color: #f3f3f3;\r\n  border: 1pt solid #c0d0d0;\r\n  margin: 0;\r\n  padding: 0; }\r\n\r\ndiv.layerselector2 div.layerGroup.open {\r\n  background-color: #FFFFFF; }\r\n\r\ndiv.layerselector2 div.layerGroup div.groupIcon {\r\n  display: inline-block;\r\n  margin-left: 12px;\r\n  vertical-align: middle; }\r\n\r\ndiv.layerselector2 div.layerGroup div.groupHeader {\r\n  display: inline-block;\r\n  font-weight: bold;\r\n  padding: 8px 10px 8px 12px;\r\n  font: 14pt Arial, sans-serif; }\r\n\r\n/* layer container */\r\ndiv.layerselector2 div.layer {\r\n  padding: 6px 10px 6px 40px;\r\n  background-color: #ffffff; }\r\n\r\ndiv.layerselector2 div.layer.odd {\r\n  background-color: #f3f3f3; }\r\n\r\ndiv.layerselector2 div.layer input {\r\n  float: left;\r\n  margin-right: 5px; }\r\n\r\ndiv.layerselector2 div.layer div.layer-tools {\r\n  float: right; }\r\n\r\ndiv.layerselector2 div.layer div.layer-icon {\r\n  float: left;\r\n  width: 16px;\r\n  height: 16px;\r\n  background-repeat: no-repeat; }\r\n\r\ndiv.layerselector2 div.layer div.layer-info {\r\n  width: 16px;\r\n  height: 16px;\r\n  margin-left: 5px;\r\n  float: right; }\r\n\r\ndiv.layerselector2 div.tab-content {\r\n  padding: 0; }\r\n\r\ndiv.layerselector2 div.tab-content div.oskarifield {\r\n  padding: 10px;\r\n  position: relative; }\r\n  div.layerselector2 div.tab-content div.oskarifield .field-description {\r\n    padding: 3px 0;\r\n    color: #666; }\r\n    div.layerselector2 div.tab-content div.oskarifield .field-description .icon-info {\r\n      display: inline-block; }\r\n  div.layerselector2 div.tab-content div.oskarifield .related-keywords {\r\n    display: none;\r\n    overflow: hidden;\r\n    height: 30px;\r\n    line-height: 30px; }\r\n    div.layerselector2 div.tab-content div.oskarifield .related-keywords .keywords-title {\r\n      box-sizing: border-box;\r\n      height: 30px;\r\n      line-height: 30px;\r\n      color: black;\r\n      font-weight: bold;\r\n      float: left; }\r\n    div.layerselector2 div.tab-content div.oskarifield .related-keywords .keyword-cont {\r\n      display: block;\r\n      box-sizing: border-box;\r\n      height: 30px;\r\n      line-height: 30px;\r\n      padding: 0 10px;\r\n      color: #0085D1;\r\n      float: left; }\r\n      div.layerselector2 div.tab-content div.oskarifield .related-keywords .keyword-cont .keyword {\r\n        float: left;\r\n        min-width: 91px; }\r\n      div.layerselector2 div.tab-content div.oskarifield .related-keywords .keyword-cont .type {\r\n        background-color: #333438;\r\n        border: solid 2px #FFDE00;\r\n        color: #FFDE00;\r\n        width: 34px;\r\n        line-height: 16px;\r\n        padding: 3px;\r\n        margin: 2px;\r\n        float: right;\r\n        display: inline-block;\r\n        text-align: center; }\r\n    div.layerselector2 div.tab-content div.oskarifield .related-keywords .focus {\r\n      background-color: #333438;\r\n      color: white; }\r\n\r\ndiv.layerselector2 div.accordion div.accordion_panel div.content {\r\n  padding: 0; }\r\n\r\ndiv.layerselector2 div.layer div.layer-backendstatus-icon {\r\n  float: left;\r\n  width: 20px;\r\n  height: 16px;\r\n  margin-right: 4px;\r\n  background-repeat: no-repeat; }\r\n\r\ndiv.layerselector2 div.layer div.backendstatus-down {\r\n  height: 20px !important;\r\n  margin-bottom: 2px;\r\n  cursor: pointer; }\r\n\r\ndiv.layerselector2 div.layer div.backendstatus-maintenance {\r\n  height: 20px !important;\r\n  margin-bottom: 2px;\r\n  cursor: pointer; }\r\n\r\ndiv.layerselector2 div.layer div.backendstatus-ok {\r\n  height: 20px !important;\r\n  margin-bottom: 2px;\r\n  margin-top: -2px;\r\n  cursor: pointer; }\r\n\r\ndiv.layerselector2 div.layer div.backendstatus-unknown {\r\n  height: 20px !important;\r\n  margin-bottom: 2px; }\r\n")}),requirejs.s.contexts._.nextTick=requirejs.nextTick;
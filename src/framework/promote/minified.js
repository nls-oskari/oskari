Oskari.clazz.define("Oskari.mapframework.bundle.promote.PromoteBundleInstance",function(){this.sandbox=null,this.started=!1,this.plugins={},this.localization=null,this.userInterfaceLanguage=null,this.service=null},{__name:"Promote",getName:function(){return this.conf.__name},setSandbox:function(e){this.sandbox=e},getSandbox:function(){return this.sandbox},getLocalization:function(e){return this.conf&&this.conf[e]?this.conf[e][this.userInterfaceLanguage]:(this._localization||(this._localization=Oskari.getLocalization(this.__name)),e&&this._localization[e]?this._localization[e]:this.localization?this._localization:{})},start:function(){var e=this;if(e.started)return;e.started=!0;var t=this.conf,n=(t?t.sandbox:null)||"sandbox",r=Oskari.getSandbox(n);e.sandbox=r,e.userInterfaceLanguage=Oskari.getLang(),this.localization=Oskari.getLocalization(this.getName()),r.register(e);var i="userinterface.AddExtensionRequest",s=r.getRequestBuilder(i),o=s(this);r.request(this,o),e.createUi();if(this.conf&&this.conf.toolbarButtons){s=r.getRequestBuilder("Toolbar.AddToolButtonRequest");for(var u in this.conf.toolbarButtons)for(var a in this.conf.toolbarButtons[u]){var f=this.conf.toolbarButtons[u][a];f.tooltip=f.tooltip[e.userInterfaceLanguage],f.disabled=!0,f.callback=function(){},r.request(e,s(a,u,f))}}},init:function(){return null},update:function(){},onEvent:function(e){var t=this.eventHandlers[e.getName()];if(!t)return;return t.apply(this,[e])},eventHandlers:{},stop:function(){var e=this.sandbox,t="userinterface.RemoveExtensionRequest",n=e.getRequestBuilder(t),r=n(this);e.request(this,r),this.sandbox.unregister(this),this.started=!1},startExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=Oskari.clazz.create("Oskari.mapframework.bundle.promote.Flyout",this),this.plugins["Oskari.userinterface.Tile"]=Oskari.clazz.create("Oskari.mapframework.bundle.promote.Tile",this)},stopExtension:function(){this.plugins["Oskari.userinterface.Flyout"]=null,this.plugins["Oskari.userinterface.Tile"]=null},getPlugins:function(){return this.plugins},getTitle:function(){return this.getLocalization("title")},getDescription:function(){return this.getLocalization("desc")},createUi:function(){var e=this;this.plugins["Oskari.userinterface.Flyout"].createUi(),this.plugins["Oskari.userinterface.Tile"].refresh()}},{protocol:["Oskari.bundle.BundleInstance","Oskari.mapframework.module.Module","Oskari.userinterface.Extension"]}),define("bundles/framework/bundle/promote/instance",function(){}),Oskari.clazz.define("Oskari.mapframework.bundle.promote.Flyout",function(e){this.instance=e,this.container=null,this.template=null},{getName:function(){return"Oskari.mapframework.bundle.promote.Flyout"},setEl:function(e,t,n){this.container=e[0],jQuery(this.container).hasClass("promote")||jQuery(this.container).addClass("promote")},startPlugin:function(){this.template=jQuery('<div class="promoteContainer"><div class="promoteDescription"></div><div><a class="promoteSignup"></a></div><div><a class="promoteRegister"></a></div></div>')},stopPlugin:function(){},getTitle:function(){return this.instance.getLocalization("title")},getDescription:function(){return this.instance.getLocalization("desc")},getOptions:function(){},createUi:function(){var e=this,t=e.instance.getSandbox(),n=jQuery(this.container);n.empty();var r=this.template.clone(),i=r.find("div.promoteDescription");i.html(this.instance.getLocalization("desc"));if(e.instance.conf.signup){var s=r.find("a.promoteSignup");s.attr("href",this.instance.getLocalization("signupUrl")),s.append(this.instance.getLocalization("signup"))}if(e.instance.conf.register){var o=r.find("a.promoteRegister");o.attr("href",this.instance.getLocalization("registerUrl")),o.append(this.instance.getLocalization("register"))}n.append(r)}},{protocol:["Oskari.userinterface.Flyout"]}),define("bundles/framework/bundle/promote/Flyout",function(){}),Oskari.clazz.define("Oskari.mapframework.bundle.promote.Tile",function(e){this.instance=e,this.container=null,this.template=null},{getName:function(){return"Oskari.mapframework.bundle.promote.Tile"},setEl:function(e,t,n){this.container=jQuery(e)},startPlugin:function(){this.refresh()},stopPlugin:function(){this.container.empty()},getTitle:function(){return this.instance.getLocalization("title")},getDescription:function(){return this.instance.getLocalization("desc")},getOptions:function(){},refresh:function(){var e=this,t=e.instance,n=this.container,r=this.template,i=t.getSandbox(),s=n.children(".oskari-tile-status")}},{protocol:["Oskari.userinterface.Tile"]}),define("bundles/framework/bundle/promote/Tile",function(){}),Oskari.registerLocalization({lang:"fi",key:"Promote",value:{title:"Sisäänkirjautuneille",desc:"Sisäänkirjautuneena saat lisää toiminnallisuuksia."}}),define("bundles/framework/bundle/promote/locale/fi",function(){}),Oskari.registerLocalization({lang:"sv",key:"Promote",value:{title:"Inskrivna användare",desc:"Inskrivna användare har tillgång till flera ägenskaper."}}),define("bundles/framework/bundle/promote/locale/sv",function(){}),Oskari.registerLocalization({lang:"en",key:"Promote",value:{title:"Signed-in users",desc:"Signed-in users have access to more functionality."}}),define("bundles/framework/bundle/promote/locale/en",function(){}),define("src/framework/promote/module",["oskari","jquery","bundles/framework/bundle/promote/instance","bundles/framework/bundle/promote/Flyout","bundles/framework/bundle/promote/Tile","bundles/framework/bundle/promote/locale/fi","bundles/framework/bundle/promote/locale/sv","bundles/framework/bundle/promote/locale/en"],function(e,t){return e.bundleCls("promote").category({create:function(){var t=this,n=e.clazz.create("Oskari.mapframework.bundle.promote.PromoteBundleInstance");return n},update:function(e,t,n,r){}})});